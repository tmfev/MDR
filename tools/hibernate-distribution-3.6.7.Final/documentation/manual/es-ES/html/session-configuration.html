<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Capítulo 3. Configuración</title><link rel="stylesheet" href="css/hibernate.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="HIBERNATE - Persistencia relacional para Java idiomático"/><link rel="up" href="index.html" title="HIBERNATE - Persistencia relacional para Java idiomático"/><link rel="prev" href="architecture.html" title="Capítulo 2. Arquitectura"/><link rel="next" href="persistent-classes.html" title="Capítulo 4. Clases persistentes"/><link rel="copyright" href="Legal_Notice.html" title="Advertencia legal"/></head><body><p id="title"><a href="http://www.hibernate.org" class="site_href"><strong>Hibernate.org</strong></a><a href="http://hibernate.org/Documentation/DocumentationOverview" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="architecture.html"><strong>Anterior</strong></a></li><li class="next"><a accesskey="n" href="persistent-classes.html"><strong>Siguiente</strong></a></li></ul><div class="chapter" lang="es-ES"><div class="titlepage"><div><div><h2 class="title"><a id="session-configuration"/>Capítulo 3. Configuración</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="session-configuration.html#configuration-programmatic">3.1. Configuración programática</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-sessionfactory">3.2. Obtención de una SessionFactory</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-hibernatejdbc">3.3. Conexiones JDBC</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional">3.4. Parámetros de configuración opcionales</a></span></dt><dd><dl><dt><span class="section"><a href="session-configuration.html#configuration-optional-dialects">3.4.1. Dialectos de SQL</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-outerjoin">3.4.2. Recuperación por Unión Externa - Outer Join Fetching</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-binarystreams">3.4.3. Flujos Binarios</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-cacheprovider">3.4.4. Caché de segundo nivel y de lectura</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-querysubstitution">3.4.5. Sustitución de Lenguaje de Consulta</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-statistics">3.4.6. Estadísticas de Hibernate</a></span></dt></dl></dd><dt><span class="section"><a href="session-configuration.html#configuration-logging">3.5. Registros de mensajes (Logging)</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-namingstrategy">3.6. Implementación de una NamingStrategy</a></span></dt><dt><span class="section"><a href="session-configuration.html#d0e3319">3.7. Implementing a PersisterClassProvider</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-xmlconfig">3.8. Archivo de configuración XML</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-j2ee">3.9. Java EE Application Server integration</a></span></dt><dd><dl><dt><span class="section"><a href="session-configuration.html#configuration-optional-transactionstrategy">3.9.1. Configuración de la estrategia de transacción</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-jndi">3.9.2. SessionFactory enlazado a JNDI</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-j2ee-currentsession">3.9.3. Administración de contexto de Sesión Actual con JTA</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-j2ee-jmx">3.9.4. Despliegue JMX</a></span></dt></dl></dd></dl></div><p>Hibernate está diseñado para operar en muchos entornos diferentes y por lo tanto hay un gran número de parámetros de configuración. Afortunadamente, la mayoría tiene valores predeterminados sensibles y Hibernate se distribuye con un archivo <code class="literal">hibernate.properties</code> de ejemplo en <code class="literal">etc/</code> que muestra las diversas opciones. Simplemente ponga el fichero de ejemplo en su ruta de clase y personalícelo de acuerdo a sus necesidades.</p><div class="section" lang="es-ES"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-programmatic"/>3.1. Configuración programática</h2></div></div></div><p>Una instancia de <code class="classname">org.hibernate.cfg.Configuration</code> representa un conjunto entero de mapeos de los tipos Java de una aplicación a una base de datos SQL. La <code class="classname">org.hibernate.cfg.Configuration</code> se utiliza para construir una <code class="interfacename">org.hibernate.SessionFactory</code> inmutable. Los mapeos se compilan desde varios archivos de mapeo XML.</p><p>Puede obtener una instancia de <code class="classname">org.hibernate.cfg.Configuration</code> instanciándola directamente y especificando los documentos de mapeo XML. Si los archivos de mapeo están en la ruta de clase, utilice <code class="literal">addResource()</code>. Por ejemplo:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_plain">&nbsp;cfg&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addResource</span><span class="java_separator">(</span><span class="java_literal">&quot;Item.hbm.xml&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addResource</span><span class="java_separator">(</span><span class="java_literal">&quot;Bid.hbm.xml&quot;</span><span class="java_separator">);</span></pre><p>Una manera opcional es especificar la clase mapeada y dejar que Hibernate encuentre el documento de mapeo por usted:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_plain">&nbsp;cfg&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addClass</span><span class="java_separator">(</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">auction</span><span class="java_separator">.</span><span class="java_type">Item</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addClass</span><span class="java_separator">(</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">auction</span><span class="java_separator">.</span><span class="java_type">Bid</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span></pre><p>Luego Hibernate buscará los archivos de mapeo llamados <code class="filename">/org/hibernate/auction/Item.hbm.xml</code> y <code class="filename">/org/hibernate/auction/Bid.hbm.xml</code> en la ruta de clase. Este enfoque elimina cualquier nombre de archivo establecido manualmente.</p><p>Una <code class="classname">org.hibernate.cfg.Configuration</code> también le permite especificar las propiedades de configuración. Por ejemplo:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_plain">&nbsp;cfg&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addClass</span><span class="java_separator">(</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">auction</span><span class="java_separator">.</span><span class="java_type">Item</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addClass</span><span class="java_separator">(</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">auction</span><span class="java_separator">.</span><span class="java_type">Bid</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setProperty</span><span class="java_separator">(</span><span class="java_literal">&quot;hibernate.dialect&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;org.hibernate.dialect.MySQLInnoDBDialect&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setProperty</span><span class="java_separator">(</span><span class="java_literal">&quot;hibernate.connection.datasource&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;java:comp/env/jdbc/test&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setProperty</span><span class="java_separator">(</span><span class="java_literal">&quot;hibernate.order_updates&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;true&quot;</span><span class="java_separator">);</span></pre><p>Esta no es la única manera de pasar propiedades de configuración a Hibernate. Algunas opciones incluyen:</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>Pasar una instancia de <code class="classname">java.util.Properties</code> a <code class="literal">Configuration.setProperties()</code>.</p></li><li><p>Colocar un archivo llamado <code class="literal">hibernate.properties</code> en un directorio raíz de la ruta de clase.</p></li><li><p>Establecer propiedades <code class="literal">System</code> utilizando <code class="literal">java -Dproperty=value</code>.</p></li><li><p>Incluir los elementos <code class="literal">&lt;property&gt;</code> en <code class="literal">hibernate.cfg.xml</code> (esto se discute más adelante).</p></li></ol></div><p>Si quiere empezar rápidamente <code class="filename">hibernate.properties</code> es el enfoque más fácil.</p><p>La <code class="classname">org.hibernate.cfg.Configuration</code> está concebida como un objeto de tiempo de inicio que se va a descartar una vez se crea una <code class="literal">SessionFactory</code>.</p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-sessionfactory"/>3.2. Obtención de una SessionFactory</h2></div></div></div><p>Cuando la <code class="classname">org.hibernate.cfg.Configuration</code> ha analizado sintácticamente todos los mapeos, la aplicación tiene que obtener una fábrica para las instancias <code class="interfacename">org.hibernate.Session</code>. Esta fábrica está concebida para que todos los hilos de la aplicación la compartan:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">SessionFactory</span><!-- <br/> --><span class="java_plain">&nbsp;sessions&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;cfg</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">buildSessionFactory</span><!-- <br/> --><span class="java_separator">();</span></pre><p>Hibernate permite que su aplicación instancie más de una <code class="interfacename">org.hibernate.SessionFactory</code>. Esto es útil si está utilizando más de una base de datos.</p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-hibernatejdbc"/>3.3. Conexiones JDBC</h2></div></div></div><p>Se aconseja que la <code class="interfacename">org.hibernate.SessionFactory</code> cree y almacene en pool conexiones JDBC por usted Si adopta este enfoque, el abrir una <code class="interfacename">org.hibernate.Session</code> es tan simple como:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Session</span><!-- <br/> --><span class="java_plain">&nbsp;session&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;sessions</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">openSession</span><!-- <br/> --><span class="java_separator">();</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_operator">//</span><!-- <br/> --><span class="java_plain">&nbsp;open&nbsp;a&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Session</span></pre><p>En el momento en que inicie una tarea que requiera acceso a la base de datos, se obtendrá una conexión JDBC del pool.</p><p>Para que esto funcione, primero necesita pasar algunas las propiedades de conexión JDBC a Hibernate. Todos los nombres de las propiedades de Hibernate y su semántica están definidas en la clase <code class="classname">org.hibernate.cfg.Environment</code>. Ahora describiremos las configuraciones más importantes para la conexión JDBC.</p><p>Hibernate obtendrá y tendrá en pool las conexiones utilizando <code class="classname">java.sql.DriverManager</code> si configura las siguientes propiedades:</p><div class="table"><a id="d0e1748"/><p class="title"><b>Tabla 3.1. Propiedades JDBC de Hibernate</b></p><div class="table-contents"><table summary="Propiedades JDBC de Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nombre de la propiedad</th><th>Propósito</th></tr></thead><tbody><tr><td><span class="property">hibernate.connection.driver_class</span></td><td><span class="emphasis"><em>JDBC driver class</em></span></td></tr><tr><td><span class="property">hibernate.connection.url</span></td><td><span class="emphasis"><em>JDBC URL</em></span></td></tr><tr><td><span class="property">hibernate.connection.username</span></td><td><span class="emphasis"><em>database user</em></span></td></tr><tr><td><span class="property">hibernate.connection.password</span></td><td><span class="emphasis"><em>database user password</em></span></td></tr><tr><td><span class="property">hibernate.connection.pool_size</span></td><td><span class="emphasis"><em>maximum number of pooled connections</em></span></td></tr></tbody></table></div></div><br class="table-break"/><p>Sin embargo, el algoritmo de pooling de la conexión propia de Hibernate es algo rudimentario. Está concebido para ayudarle a comenzar y <span class="emphasis"><em>no para utilizarse en un sistema de producción</em></span> ni siquiera para pruebas de rendimiento. Para alcanzar un mejor rendimiento y estabilidad debe utilizar un pool de terceros. Sólo remplace la propiedad <span class="property">hibernate.connection.pool_size</span> con configuraciones específicas del pool de conexiones. Esto desactivará el pool interno de Hibernate. Por ejemplo, es posible utilizar C3P0.</p><p>C3P0 es un pool de conexiones JDBC de código abierto distribuido junto con Hibernate en el directorio <code class="literal">lib</code>. Hibernate utilizará su <code class="classname">org.hibernate.connection.C3P0ConnectionProvider</code> para pooling de conexiones si establece propiedades <code class="literal">hibernate.c3p0.*</code>. Si quiere utilizar Proxool refiérase a <code class="literal">hibernate.properties</code> incluído en el paquete y al sitio web de Hibernate para obtener más información.</p><p>Aquí hay un archivo <code class="literal">hibernate.properties</code> de ejemplo para c3p0:</p><pre class="programlisting">hibernate.connection.driver_class = org.postgresql.Driver
hibernate.connection.url = jdbc:postgresql://localhost/mydatabase
hibernate.connection.username = myuser
hibernate.connection.password = secret
hibernate.c3p0.min_size=5
hibernate.c3p0.max_size=20
hibernate.c3p0.timeout=1800
hibernate.c3p0.max_statements=50
hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect</pre><p>Para su utilización dentro de un servidor de aplicaciones, casi siempre usted debe configurar Hibernate para obtener conexiones de un <code class="interfacename">javax.sql.Datasource</code> del servidor de aplicaciones registrado en JNDI. Necesitará establecer al menos una de las siguientes propiedades:</p><div class="table"><a id="d0e1830"/><p class="title"><b>Tabla 3.2. Propiedades de la Fuente de Datos de Hibernate</b></p><div class="table-contents"><table summary="Propiedades de la Fuente de Datos de Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nombre de la propiedad</th><th>Propósito</th></tr></thead><tbody><tr><td><span class="property">hibernate.connection.datasource</span></td><td><span class="emphasis"><em>datasource JNDI name</em></span></td></tr><tr><td><span class="property">hibernate.jndi.url</span></td><td><span class="emphasis"><em>URL del proveedor JNDI</em></span> (opcional)</td></tr><tr><td><span class="property">hibernate.jndi.class</span></td><td><span class="emphasis"><em>clase del JNDI <code class="literal">InitialContextFactory</code></em></span> (opcional)</td></tr><tr><td><span class="property">hibernate.connection.username</span></td><td><span class="emphasis"><em>usuario de la base de datos</em></span> (opcional)</td></tr><tr><td><span class="property">hibernate.connection.password</span></td><td><span class="emphasis"><em>contraseña del usuario de la base de datos</em></span> (opcional)</td></tr></tbody></table></div></div><br class="table-break"/><p>He aquí un archivo <code class="literal">hibernate.properties</code> de ejemplo para una fuente de datos JNDI provisto por un servidor de aplicaciones:</p><pre class="programlisting">hibernate.connection.datasource = java:/comp/env/jdbc/test
hibernate.transaction.factory_class = \
    org.hibernate.transaction.JTATransactionFactory
hibernate.transaction.manager_lookup_class = \
    org.hibernate.transaction.JBossTransactionManagerLookup
hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect</pre><p>Las conexiones JDBC obtenidas de una fuente de datos JNDI participarán automáticamente en las transacciones del servidor de aplicaciones administradas por el contenedor.</p><p>Pueden darse propiedades de conexión arbitrarias anteponiendo "<code class="literal">hibernate.connnection</code>" al nombre de propiedad de la conexión. Por ejemplo, puede especificar una propiedad de conexión <code class="literal">charSet</code> usando <span class="property">hibernate.connection.charSet</span>.</p><p>Puede definir su propia estrategia plugin para obtener conexiones JDBC implementando la interfaz <code class="interfacename">org.hibernate.connection.ConnectionProvider</code> y especificando su propia implementación personalizada por medio de la propiedad <span class="property">hibernate.connection.provider_class</span>.</p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-optional"/>3.4. Parámetros de configuración opcionales</h2></div></div></div><p>Hay otras propiedades que controlan el comportamiento de Hibernate en tiempo de ejecución. Todas son opcionales y tienen valores razonables por defecto. </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Aviso</h2><p><span class="emphasis"><em>Algunas de estas propiedades se encuentran a "nivel del sistema sólamente".</em></span> Las propiedades a nivel del sistema sólamente se pueden establecer por medio de <code class="literal">java -Dproperty=value</code> o <code class="filename">hibernate.properties</code>. <span class="emphasis"><em>No</em></span> se pueden establecer por medio de las técnicas descritas anteriormente.</p></div><div class="table"><a id="configuration-optional-properties"/><p class="title"><b>Tabla 3.3. Propiedades de Configuración de Hibernate</b></p><div class="table-contents"><table summary="Propiedades de Configuración de Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nombre de la propiedad</th><th>Propósito</th></tr></thead><tbody><tr><td><span class="property">hibernate.dialect</span></td><td>El nombre de clase de un <code class="classname">org.hibernate.dialect.Dialect</code> de Hibernate, el cual le permite que genere un SQL optimizado para una base de datos relacional en particular.  <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">full.classname.of.Dialect</code> </p> <p>En la mayoría de los casos Hibernate podrá de hecho seleccionar la implementación <code class="classname">org.hibernate.dialect.Dialect</code> correcta con base en los <code class="literal">JDBC metadata</code> que el controlador JDBC retorna. </p></td></tr><tr><td><span class="property">hibernate.show_sql</span></td><td>Escribe todas las declaraciones SQL a la consola. Esta es una alternativa para establecer la categoria de registro <code class="literal">org.hibernate.SQL</code> a <code class="literal">debug</code>. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><span class="property">hibernate.format_sql</span></td><td>Imprime el SQL en el registro y la consola. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><span class="property">hibernate.default_schema</span></td><td>Califica los nombres de tabla sin calificar con el esquema/espacio de tabla dado en el SQL generado.  <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">SCHEMA_NAME</code> </p></td></tr><tr><td><span class="property">hibernate.default_catalog</span></td><td>Califica los nombres de tabla sin calificar con el catálogo dado en el SQL generado. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">CATALOG_NAME</code> </p></td></tr><tr><td><span class="property">hibernate.session_factory_name</span></td><td>Automáticamente se vinculará el <code class="interfacename">org.hibernate.SessionFactory</code> a este nombre en JNDI después de que se ha creado. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">jndi/composite/name</code> </p></td></tr><tr><td><span class="property">hibernate.max_fetch_depth</span></td><td>Establece una "profundidad" máxima del árbol de recuperación por unión externa (outer join) para asociaciones de un sólo extremo (uno-a-uno, muchos-a-uno). Un <code class="literal">0</code> deshabilita la recuperación por unión externa predeterminada. <p><span class="strong"><strong>ej.</strong></span> los valores recomendados entre <code class="literal">0</code> y <code class="literal">3</code> </p></td></tr><tr><td><span class="property">hibernate.default_batch_fetch_size</span></td><td>Establece un tamaño por defecto para la recuperación en lote de asociaciones de Hibernate. <p><span class="strong"><strong>ej.</strong></span> valores recomendados <code class="literal">4</code>, <code class="literal">8</code>, <code class="literal">16</code>  </p></td></tr><tr><td><span class="property">hibernate.default_entity_mode</span></td><td>Establece un modo predeterminado de representación de entidades para todas las sesiones abiertas desde esta <code class="literal">SessionFactory</code>  <p><code class="literal">dynamic-map</code>, <code class="literal">dom4j</code>, <code class="literal">pojo</code> </p></td></tr><tr><td><span class="property">hibernate.order_updates</span></td><td>Obliga a Hibernate a ordenar las actualizaciones SQL por el valor de la clave principal de los items a actualizar. Esto resultará en menos bloqueos de transacción en sistemas altamente concurrentes. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><span class="property">hibernate.generate_statistics</span></td><td>De habilitarse, Hibernate colectará estadísticas útiles para la afinación de rendimiento.  <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><span class="property">hibernate.use_identifier_rollback</span></td><td>De habilitarse, cuando se borren los objetos las propiedades identificadoras generadas se resetearán a losvalores establecidos por defecto. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><span class="property">hibernate.use_sql_comments</span></td><td>De activarse, Hibernate generará comentarios dentro del SQL, para una depuración más fácil, por defecto es <code class="literal">false</code>. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><span class="property">hibernate.id.new_generator_mappings</span></td><td>Setting is relevant when using <code class="classname">@GeneratedValue</code>. It indicates whether or not the new <code class="classname">IdentifierGenerator</code> implementations are used for <code class="classname">javax.persistence.GenerationType.AUTO</code>, <code class="classname">javax.persistence.GenerationType.TABLE</code> and <code class="classname">javax.persistence.GenerationType.SEQUENCE</code>. Default to <code class="literal">false</code> to keep backward compatibility. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr></tbody></table></div></div><br class="table-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Nota</h2><p>We recommend all new projects which make use of to use <code class="classname">@GeneratedValue</code> to also set <code class="code">hibernate.id.new_generator_mappings=true</code> as the new generators are more efficient and closer to the JPA 2 specification semantic. However they are not backward compatible with existing databases (if a sequence or a table is used for id generation).</p></div><div class="table"><a id="configuration-jdbc-properties"/><p class="title"><b>Tabla 3.4. Propiedades de JDBC y Conexiones de Hibernate</b></p><div class="table-contents"><table summary="Propiedades de JDBC y Conexiones de Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nombre de la propiedad</th><th>Propósito</th></tr></thead><tbody><tr><td><span class="property">hibernate.jdbc.fetch_size</span></td><td>Un valor distinto de cero que determina el tamaño de recuperación de JDBC (llama a <code class="literal">Statement.setFetchSize()</code>).</td></tr><tr><td><span class="property">hibernate.jdbc.batch_size</span></td><td>Un valor distinto de cero habilita que Hibernate utilice las actualizaciones en lote de JDBC2.  <p><span class="strong"><strong>ej.</strong></span> valores recomendados entre <code class="literal">5</code> y <code class="literal">30</code>  </p></td></tr><tr><td><span class="property">hibernate.jdbc.batch_versioned_data</span></td><td>Set this property to <code class="literal">true</code> if your JDBC driver returns correct row counts from <code class="literal">executeBatch()</code>. It is usually safe to turn this option on. Hibernate will then use batched DML for automatically versioned data. Defaults to <code class="literal">false</code>. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><span class="property">hibernate.jdbc.factory_class</span></td><td>Selecciona un <code class="interfacename">org.hibernate.jdbc.Batcher</code> personalizado. La mayoría de las aplicaciones no necesitarán esta propiedad de configuración.  <p><span class="strong"><strong>eg.</strong></span> <code class="literal">classname.of.BatcherFactory</code> </p></td></tr><tr><td><span class="property">hibernate.jdbc.use_scrollable_resultset</span></td><td>Habilita a Hibernate para utilizar los grupos de resultados deslizables de JDBC2. Esta propiedad sólamente es necesaria cuando se utilizan conexiones JDBC provistas por el usuario. En el caso contrario Hibernate utiliza los metadatos de conexión. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><span class="property">hibernate.jdbc.use_streams_for_binary</span></td><td>Utiliza flujos (streams) al escribir/leer tipos <code class="literal">binary</code> o <code class="literal">serializable</code> a/desde JDBC. <span class="emphasis"><em>Propiedad a nivel de sistema</em></span> <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><span class="property">hibernate.jdbc.use_get_generated_keys</span></td><td>Habilita el uso de <code class="literal">PreparedStatement.getGeneratedKeys()</code> de JDBC3 para recuperar claves generadas nativamente después de insertar. Requiere un controlador JDBC3+ y un JRE1.4+. Establézcalo como falso si su controlador tiene problemas con los generadores del identificador de Hibernate. Por defecto, se intenta determinar las capacidades del controlador utilizando los metadatos de conexión. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true|false</code> </p></td></tr><tr><td><span class="property">hibernate.connection.provider_class</span></td><td>EL nombre de clase de un <code class="interfacename">org.hibernate.connection.ConnectionProvider</code> personalizado que proporcione conexiones JDBC a Hibernate.  <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">classname.of.ConnectionProvider</code> </p></td></tr><tr><td><span class="property">hibernate.connection.isolation</span></td><td>Establece el nivel de aislamiento de la transacción JDBC. Comprueba <code class="interfacename">java.sql.Connection</code> para valores significativos pero observe que la mayoría de las bases de datos no soportan todos los niveles de aislamiento y algunos definen nivekes de aislamiento adicionales y no estándares. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">1, 2, 4, 8</code> </p></td></tr><tr><td><span class="property">hibernate.connection.autocommit</span></td><td>Habilita un guardado automático (autocommit) para las conexiones JDBC en pool (no se recomienda). <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><span class="property">hibernate.connection.release_mode</span></td><td>Especifica el momento en que Hibernate debe liberar las conexiones JDBC. Por defecto, una conexión JDBC es retenida hasta que la sesión se cierra o se desconecta explícitamente. Para una fuente de datos JTA del servidor de aplicaciones, debe utilizar <code class="literal">after_statement</code> para liberar agresivamente las conexiones después de cada llamada JDBC. Para una conexión no JTA, frecuentemente tiene sentido el liberar la conexión al final de cada transacción, el utilizar<code class="literal">after_transaction</code>. <code class="literal">auto</code> escogerá <code class="literal">after_statement</code> para las estrategias de transacción JTA y CMT y <code class="literal">after_transaction</code> para la estrategia JDBC de transacción.  <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">auto</code> (default) | <code class="literal">on_close</code> | <code class="literal">after_transaction</code> | <code class="literal">after_statement</code> </p> <p>This setting only affects <code class="literal">Session</code>s returned from <code class="literal">SessionFactory.openSession</code>. For <code class="literal">Session</code>s obtained through <code class="literal">SessionFactory.getCurrentSession</code>, the <code class="literal">CurrentSessionContext</code> implementation configured for use controls the connection release mode for those <code class="literal">Session</code>s. See <a class="xref" href="architecture.html#architecture-current-session" title="2.3. Sesiones contextuales">Sección 2.3, “Sesiones contextuales”</a> </p></td></tr><tr><td><span class="property">hibernate.connection.</span><span class="emphasis"><em>&lt;propertyName&gt;</em></span></td><td>Pasar la propiedad JDBC <span class="emphasis"><em>&lt;propertyName&gt;</em></span> a <code class="literal">DriverManager.getConnection()</code>.</td></tr><tr><td><span class="property">hibernate.jndi.</span><span class="emphasis"><em>&lt;propertyName&gt;</em></span></td><td>Pasar la propiedad <span class="emphasis"><em>&lt;propertyName&gt;</em></span> al <code class="literal">InitialContextFactory</code> JNDI.</td></tr></tbody></table></div></div><br class="table-break"/><div class="table"><a id="configuration-cache-properties"/><p class="title"><b>Tabla 3.5. Propiedades de Caché de Hibernate</b></p><div class="table-contents"><table summary="Propiedades de Caché de Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nombre de la propiedad</th><th>Propósito</th></tr></thead><tbody><tr><td><code class="literal">hibernate.cache.provider_class</code></td><td>El nombre de clase de un <code class="literal">CacheProvider</code> personalizado. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">classname.of.CacheProvider</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.use_minimal_puts</code></td><td>Optimiza la operación del caché de segundo nivel para minimizar escrituras, con el costo de lecturas más frecuentes. Esta configuración es más útil para cachés en clúster y en Hibernate3, está habilitado por defecto para implementaciones de caché en clúster.  <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true|false</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.use_query_cache</code></td><td>Habilita el caché de consultas. Las consultas individuales todavía tienen que establecerse con cachés.  <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true|false</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.use_second_level_cache</code></td><td>Se puede utilizar para deshabilitar por completo el caché de segundo nivel, que está habilitado por defecto para clases que especifican un mapeo <code class="literal">&lt;cache&gt;</code>.  <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true|false</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.query_cache_factory</code></td><td>El nombre de clase de una interfaz <code class="literal">QueryCache</code> personalizada, por defecto al <code class="literal">StandardQueryCache</code> incorporado. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">classname.of.QueryCache</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.region_prefix</code></td><td>Un prefijo que se debe utilizar para los nombres de región del caché de segundo nivel. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">prefix</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.use_structured_entries</code></td><td>Obliga a Hibernate a almacenar los datos en el caché de segundo nivel en un formato más amigable para personas. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true|false</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.default_cache_concurrency_strategy</code></td><td>Setting used to give the name of the default <code class="classname">org.hibernate.annotations.CacheConcurrencyStrategy</code> to use when either <code class="classname">@Cacheable</code> or <code class="classname">@Cache</code> is used. <code class="code">@Cache(strategy="..")</code> is used to override this default.</td></tr></tbody></table></div></div><br class="table-break"/><div class="table"><a id="configuration-transaction-properties"/><p class="title"><b>Tabla 3.6. Propiedades de Transacción de Hibernate</b></p><div class="table-contents"><table summary="Propiedades de Transacción de Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nombre de la propiedad</th><th>Propósito</th></tr></thead><tbody><tr><td><code class="literal">hibernate.transaction.factory_class</code></td><td>El nombre de clase de un <code class="literal">TransactionFactory</code> a utilizar con la API de <code class="literal">Transaction</code> de Hibernate (por defecto es <code class="literal">JDBCTransactionFactory</code>). <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">classname.of.TransactionFactory</code> </p></td></tr><tr><td><code class="literal">jta.UserTransaction</code></td><td>Un nombre JNDI utilizado por <code class="literal">JTATransactionFactory</code> para obtener la <code class="literal">UserTransaction</code> de JTA del servidor de aplicaciones.  <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">jndi/composite/name</code> </p></td></tr><tr><td><code class="literal">hibernate.transaction.manager_lookup_class</code></td><td>El nombre de clase de un <code class="literal">TransactionManagerLookup</code>. Se requiere cuando el chaché a nivel de MVJ está habilitado o cuando se utiliza un generador alto/bajo en un entorno JTA. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">classname.of.TransactionManagerLookup</code> </p></td></tr><tr><td><code class="literal">hibernate.transaction.flush_before_completion</code></td><td>If enabled, the session will be automatically flushed during the before completion phase of the transaction. Built-in and automatic session context management is preferred, see <a class="xref" href="architecture.html#architecture-current-session" title="2.3. Sesiones contextuales">Sección 2.3, “Sesiones contextuales”</a>. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><code class="literal">hibernate.transaction.auto_close_session</code></td><td>If enabled, the session will be automatically closed during the after completion phase of the transaction. Built-in and automatic session context management is preferred, see <a class="xref" href="architecture.html#architecture-current-session" title="2.3. Sesiones contextuales">Sección 2.3, “Sesiones contextuales”</a>. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr></tbody></table></div></div><br class="table-break"/><div class="table"><a id="configuration-misc-properties"/><p class="title"><b>Tabla 3.7. Propiedades Misceláneas</b></p><div class="table-contents"><table summary="Propiedades Misceláneas" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nombre de la propiedad</th><th>Propósito</th></tr></thead><tbody><tr><td><code class="literal">hibernate.current_session_context_class</code></td><td>Supply a custom strategy for the scoping of the "current" <code class="literal">Session</code>. See <a class="xref" href="architecture.html#architecture-current-session" title="2.3. Sesiones contextuales">Sección 2.3, “Sesiones contextuales”</a> for more information about the built-in strategies. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">jta</code> | <code class="literal">thread</code> | <code class="literal">managed</code> | <code class="literal">custom.Class</code> </p></td></tr><tr><td><code class="literal">hibernate.query.factory_class</code></td><td>Elige la implementación de análisis sintáctico HQL. <p><span class="strong"><strong>ej.</strong></span> <code class="literal">org.hibernate.hql.ast.ASTQueryTranslatorFactory</code> o <code class="literal">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</code> </p></td></tr><tr><td><code class="literal">hibernate.query.substitutions</code></td><td>Se utiliza para mapear desde tokens en consultas Hibernate a tokens SQL. (por ejemplo, los tokens pueden ser nombres de función o literales).  <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">hqlLiteral=SQL_LITERAL, hqlFunction=SQLFUNC</code> </p></td></tr><tr><td><code class="literal">hibernate.hbm2ddl.auto</code></td><td>Exporta o valida automáticamente DDL de esquema a la base de datos cuando se crea la <code class="literal">SessionFactory</code>. Con <code class="literal">create-drop</code> se desechará el esquema de la base de datos cuando la <code class="literal">SessionFactory</code> se cierre explícitamente. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">validate</code> | <code class="literal">update</code> | <code class="literal">create</code> | <code class="literal">create-drop</code> </p></td></tr><tr><td><code class="literal">hibernate.hbm2ddl.import_files</code></td><td><p>Comma-separated names of the optional files containing SQL DML statements executed during the <code class="classname">SessionFactory</code> creation. This is useful for testing or demoing: by adding INSERT statements for example you can populate your database with a minimal set of data when it is deployed.</p><p>File order matters, the statements of a give file are executed before the statements of the following files. These statements are only executed if the schema is created ie if <code class="literal">hibernate.hbm2ddl.auto</code> is set to <code class="literal">create</code> or <code class="literal">create-drop</code>.</p><p><span class="strong"><strong>e.g.</strong></span> <code class="literal">/humans.sql,/dogs.sql</code> </p></td></tr><tr><td><code class="literal">hibernate.bytecode.use_reflection_optimizer</code></td><td><p>Enables the use of bytecode manipulation instead of runtime reflection. This is a System-level property and cannot be set in <code class="literal">hibernate.cfg.xml</code>. Reflection can sometimes be useful when troubleshooting. Hibernate always requires either CGLIB or javassist even if you turn off the optimizer.</p><p><span class="strong"><strong>e.g.</strong></span> <code class="literal">true</code> | <code class="literal">false</code> </p></td></tr><tr><td><code class="literal">hibernate.bytecode.provider</code></td><td><p>Both javassist or cglib can be used as byte manipulation engines; the default is <code class="literal">javassist</code>.</p><p><span class="strong"><strong>e.g.</strong></span> <code class="literal">javassist</code> | <code class="literal">cglib</code> </p></td></tr></tbody></table></div></div><br class="table-break"/><div class="section" lang="es-ES"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-dialects"/>3.4.1. Dialectos de SQL</h3></div></div></div><p>Siempre configure la propiedad <code class="literal">hibernate.dialect</code> a la subclase correcta <code class="literal">org.hibernate.dialect.Dialect</code> para su base de datos. Si especifica un dialecto, Hibernate utilizará valores predeterminados de manera sensible para algunas de las otras propiedades enumeradas anteriormente, ahorrándole el esfuerzo de especificarlas manualmente.</p><div class="table"><a id="sql-dialects"/><p class="title"><b>Tabla 3.8. Dialectos SQL de Hibernate(<code class="literal">hibernate.dialect</code>)</b></p><div class="table-contents"><table summary="Dialectos SQL de Hibernate(hibernate.dialect)" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>RDBMS</th><th>Dialecto</th></tr></thead><tbody><tr><td>DB2</td><td><code class="literal">org.hibernate.dialect.DB2Dialect</code></td></tr><tr><td>DB2 AS/400</td><td><code class="literal">org.hibernate.dialect.DB2400Dialect</code></td></tr><tr><td>DB2 OS390</td><td><code class="literal">org.hibernate.dialect.DB2390Dialect</code></td></tr><tr><td>PostgreSQL</td><td><code class="literal">org.hibernate.dialect.PostgreSQLDialect</code></td></tr><tr><td>MySQL5</td><td><code class="literal">org.hibernate.dialect.MySQL5Dialect</code></td></tr><tr><td>MySQL5 with InnoDB</td><td><code class="literal">org.hibernate.dialect.MySQL5InnoDBDialect</code></td></tr><tr><td>MySQL con MyISAM</td><td><code class="literal">org.hibernate.dialect.MySQLMyISAMDialect</code></td></tr><tr><td>Oracle (cualquier versión)</td><td><code class="literal">org.hibernate.dialect.OracleDialect</code></td></tr><tr><td>Oracle 9i</td><td><code class="literal">org.hibernate.dialect.Oracle9iDialect</code></td></tr><tr><td>Oracle 10g</td><td><code class="literal">org.hibernate.dialect.Oracle10gDialect</code></td></tr><tr><td>Oracle 11g</td><td><code class="literal">org.hibernate.dialect.Oracle10gDialect</code></td></tr><tr><td>Sybase</td><td><code class="literal">org.hibernate.dialect.SybaseASE15Dialect</code></td></tr><tr><td>Sybase Anywhere</td><td><code class="literal">org.hibernate.dialect.SybaseAnywhereDialect</code></td></tr><tr><td>Microsoft SQL Server 2000</td><td><code class="literal">org.hibernate.dialect.SQLServerDialect</code></td></tr><tr><td>Microsoft SQL Server 2005</td><td><code class="literal">org.hibernate.dialect.SQLServer2005Dialect</code></td></tr><tr><td>Microsoft SQL Server 2008</td><td><code class="literal">org.hibernate.dialect.SQLServer2008Dialect</code></td></tr><tr><td>SAP DB</td><td><code class="literal">org.hibernate.dialect.SAPDBDialect</code></td></tr><tr><td>Informix</td><td><code class="literal">org.hibernate.dialect.InformixDialect</code></td></tr><tr><td>HypersonicSQL</td><td><code class="literal">org.hibernate.dialect.HSQLDialect</code></td></tr><tr><td>H2 Database</td><td><code class="literal">org.hibernate.dialect.H2Dialect</code></td></tr><tr><td>Ingres</td><td><code class="literal">org.hibernate.dialect.IngresDialect</code></td></tr><tr><td>Progress</td><td><code class="literal">org.hibernate.dialect.ProgressDialect</code></td></tr><tr><td>Mckoi SQL</td><td><code class="literal">org.hibernate.dialect.MckoiDialect</code></td></tr><tr><td>Interbase</td><td><code class="literal">org.hibernate.dialect.InterbaseDialect</code></td></tr><tr><td>Pointbase</td><td><code class="literal">org.hibernate.dialect.PointbaseDialect</code></td></tr><tr><td>FrontBase</td><td><code class="literal">org.hibernate.dialect.FrontbaseDialect</code></td></tr><tr><td>Firebird</td><td><code class="literal">org.hibernate.dialect.FirebirdDialect</code></td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-outerjoin"/>3.4.2. Recuperación por Unión Externa - Outer Join Fetching</h3></div></div></div><p>Si su base de datos soporta uniones externas del estilo ANSI, Oracle o Sybase, frecuentemente la <span class="emphasis"><em>recuperación por unión externa</em></span> aumentará el rendimiento limitando el número de llamadas a la base de datos. La recuperación por unión externa permite que un gráfico completo de objetos conectados por asociaciones muchos-a-uno, uno-a-muchos, muchos-a-muchos y uno-a-uno sea recuperado en un sólo <code class="literal">SELECT</code> SQL.</p><p>La recuperación por unión externa puede ser deshabilitada <span class="emphasis"><em>globalmente</em></span> estableciendo la propiedad <code class="literal">hibernate.max_fetch_depth</code> como <code class="literal">0</code>. Un valor de <code class="literal">1</code> o mayor habilita la recuperación por unión externa para asociaciones uno-a-uno y muchos-a-uno que hayan sido mapeadas con <code class="literal">fetch="join"</code>.</p><p>See <a class="xref" href="performance.html#performance-fetching" title="21.1. Estrategias de recuperación">Sección 21.1, “Estrategias de recuperación”</a> for more information.</p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-binarystreams"/>3.4.3. Flujos Binarios</h3></div></div></div><p>Oracle limita el tamaño de arrays de <code class="literal">byte</code> que se puedan pasar a/desde su controlador JDBC. Si desea utilizar instancias grandes de tipo <code class="literal">binary</code> o <code class="literal">serializable</code>, usted debe habilitar <code class="literal">hibernate.jdbc.use_streams_for_binary</code>. <span class="emphasis"><em>Esta es una configuración a nivel de sistema sólamente.</em></span></p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-cacheprovider"/>3.4.4. Caché de segundo nivel y de lectura</h3></div></div></div><p>The properties prefixed by <code class="literal">hibernate.cache</code> allow you to use a process or cluster scoped second-level cache system with Hibernate. See the <a class="xref" href="performance.html#performance-cache" title="21.2. El Caché de Segundo Nivel">Sección 21.2, “El Caché de Segundo Nivel”</a> for more information.</p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-querysubstitution"/>3.4.5. Sustitución de Lenguaje de Consulta</h3></div></div></div><p>Puede definir nuevos tokens de consulta de Hibernate utilizando <code class="literal">hibernate.query.substitutions</code>. Por ejemplo:</p><pre class="programlisting">hibernate.query.substitutions true=1, false=0</pre><p>Esto causaría que los tokens <code class="literal">true</code> y <code class="literal">false</code> sean traducidos a literales enteros en el SQL generado.</p><pre class="programlisting">hibernate.query.substitutions toLowercase=LOWER</pre><p>Esto le permitiría renombrar la función <code class="literal">LOWER</code> de SQL.</p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-statistics"/>3.4.6. Estadísticas de Hibernate</h3></div></div></div><p>Si habilita <code class="literal">hibernate.generate_statistics</code>, Hibernate expondrá un número de métricas que son útiles al afinar un sistema en ejecución por medio de <code class="literal">SessionFactory.getStatistics()</code>. Incluso se puede configurar Hibernate para exponer estas estadísticas por medio de JMX. Lea el Javadoc de las interfaces en <code class="literal">org.hibernate.stats</code> para obtener más información.</p></div></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-logging"/>3.5. Registros de mensajes (Logging)</h2></div></div></div><p>Hibernate utiliza <a class="ulink" href="http://www.slf4j.org/">Simple Logging Facade for Java</a> (SLF4J) con el fin de registrar varios eventos del sistema. SLF4J puede direccionar su salida de registro a varios marcos de trabajo de registro (NOP, Simple, log4j versión 1.2, JDK 1.4 logging, JCL o logback) dependiendo de su enlace escogido. Con el fin de configurar el registro necesitará <code class="filename">slf4j-api.jar</code> en su ruta de clase junto con el archivo jar para su enlace preferido - <code class="filename">slf4j-log4j12.jar</code> en el caso de Log4J. Consulte la <a class="ulink" href="http://www.slf4j.org/manual.html">documentación</a> SLF4J para obtener mayores detalles. Para usar Log4j también necesitará poner un archivo <code class="filename">log4j.properties</code> en su ruta de clase. Un archivo de propiedades de ejemplo se distribuye junto con Hibernate en el directorio <code class="literal">src/</code>.</p><p>Le recomendamos bastante que se familiarice con los mensajes de registro de Hibernate. Se ha trabajado bastante para hacer que los registros de Hibernate sean tan detallados como sea posible, sin hacerlos ilegibles. Es un dispositivo esencial en la resolución de problemas. Las categorías de registro más interesantes son las siguientes: </p><div class="table"><a id="log-categories"/><p class="title"><b>Tabla 3.9. Categorías de Registro de Hibernate</b></p><div class="table-contents"><table summary="Categorías de Registro de Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Categoría</th><th>Función</th></tr></thead><tbody><tr><td><code class="literal">org.hibernate.SQL</code></td><td>Registra todas las declaraciones DML de SQL a medida que se ejecutan</td></tr><tr><td><code class="literal">org.hibernate.type</code></td><td>Registra todos los parámetros JDBC</td></tr><tr><td><code class="literal">org.hibernate.tool.hbm2ddl</code></td><td>Registra todas las declaraciones DDL de SQL a medida que se ejecutan</td></tr><tr><td><code class="literal">org.hibernate.pretty</code></td><td>Registra el estado de todas las entidades (máximo 20 entidades) asociadas con la sesión en tiempo de limpieza (flush)</td></tr><tr><td><code class="literal">org.hibernate.cache</code></td><td>Registra toda la actividad del caché de segundo nivel</td></tr><tr><td><code class="literal">org.hibernate.transaction</code></td><td>Registra la actividad relacionada con la transacción</td></tr><tr><td><code class="literal">org.hibernate.jdbc</code></td><td>Registra toda adquisición de recursos JDBC</td></tr><tr><td><code class="literal">org.hibernate.hql.ast.AST</code></td><td>Regista los ASTs de HQL y SQL, durante análisis de consultas.</td></tr><tr><td><code class="literal">org.hibernate.secure</code></td><td>Registra todas las peticiones de autorización JAAS</td></tr><tr><td><code class="literal">org.hibernate</code></td><td>Registra todo. Hay mucha información, pero es útil para la resolución de problemas</td></tr></tbody></table></div></div><br class="table-break"/><p>Al desarrollar aplicaciones con Hibernate, casi siempre debe trabajar con <code class="literal">debug</code> habilitado para la categoría <code class="literal">org.hibernate.SQL</code> o, alternativamente, la propiedad <code class="literal">hibernate.show_sql</code> habilitada.</p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-namingstrategy"/>3.6. Implementación de una <code class="literal">NamingStrategy</code></h2></div></div></div><p>La interfaz <code class="literal">org.hibernate.cfg.NamingStrategy</code> le permite especificar un "estándar de nombrado" para objetos de la base de datos y los elementos del esquema.</p><p>Puede proveer reglas para generar automáticamente identificadores de la base de datos a partir de identificadores JDBC o para procesar nombres "lógicos" de columnas y tablas dadas en el archivo de mapeo en nombres "físicos" de columnas y tablas. Esta funcionalidad ayuda a reducir la verborragia del documento de mapeo, eliminando ruidos repetitivos (por ejemplo, prefijos <code class="literal">TBL_</code>). Hibernate utiliza una estrategia por defecto bastante mínima.</p><p>Puede especificar una estrategia diferente llamando a <code class="literal">Configuration.setNamingStrategy()</code> antes de agregar los mapeos:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">SessionFactory</span><!-- <br/> --><span class="java_plain">&nbsp;sf&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setNamingStrategy</span><span class="java_separator">(</span><span class="java_type">ImprovedNamingStrategy</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addFile</span><span class="java_separator">(</span><span class="java_literal">&quot;Item.hbm.xml&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addFile</span><span class="java_separator">(</span><span class="java_literal">&quot;Bid.hbm.xml&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">buildSessionFactory</span><span class="java_separator">();</span></pre><p><code class="literal">org.hibernate.cfg.ImprovedNamingStrategy</code> es una estrategia incorporada que puede ser un punto de partida útil para algunas aplicaciones.</p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3319"/>3.7. Implementing a PersisterClassProvider</h2></div></div></div><p>You can configure the persister implementation used to persist your entities and collections:</p><div class="itemizedlist"><ul><li><p>by default, Hibernate uses persisters that make sense in a relational model and follow Java Persistence's specification</p></li><li><p>you can define a <code class="classname">PersisterClassProvider</code> implementation that provides the persister class used of a given entity or collection</p></li><li><p>finally, you can override them on a per entity and collection basis in the mapping using <code class="classname">@Persister</code> or its XML equivalent</p></li></ul></div><p>The latter in the list the higher in priority.</p><p>You can pass the <code class="classname">PersisterClassProvider</code> instance to the <code class="classname">Configuration</code> object.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">SessionFactory</span><!-- <br/> --><span class="java_plain">&nbsp;sf&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setPersisterClassProvider</span><span class="java_separator">(</span><span class="java_plain">customPersisterClassProvider</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addAnnotatedClass</span><span class="java_separator">(</span><span class="java_type">Order</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">buildSessionFactory</span><span class="java_separator">();</span></pre><p>The persister class provider methods, when returning a non null persister class, override the default Hibernate persisters. The entity name or the collection role are passed to the methods. It is a nice way to centralize the overriding logic of the persisters instead of spreading them on each entity or collection mapping.</p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-xmlconfig"/>3.8. Archivo de configuración XML</h2></div></div></div><p>Un enfoque alternativo de configuración es especificar una configuración completa en un archivo llamado <code class="literal">hibernate.cfg.xml</code>. Este archivo se puede utilizar como un remplazo del archivo <code class="literal">hibernate.properties</code> o en el caso de que ambos se encuentren presentes, para sobrescribir propiedades.</p><p>El archivo de configuración XML por defecto se espera en la raíz de su <code class="literal">CLASSPATH</code>. Este es un ejemplo:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version='1.0'&nbsp;encoding='utf-8'?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">hibernate-configuration</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;-//Hibernate/Hibernate&nbsp;Configuration&nbsp;DTD//EN&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">hibernate-configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;a&nbsp;SessionFactory&nbsp;instance&nbsp;listed&nbsp;as&nbsp;/jndi/name&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">session-factory</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:hibernate/SessionFactory&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;properties&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;connection.datasource&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/comp/env/jdbc/MyDB</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;dialect&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate.dialect.MySQLDialect</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;show_sql&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;transaction.factory_class&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.hibernate.transaction.JTATransactionFactory</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jta.UserTransaction&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:comp/UserTransaction</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;mapping&nbsp;files&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mapping</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org/hibernate/auction/Item.hbm.xml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mapping</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org/hibernate/auction/Bid.hbm.xml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;cache&nbsp;settings&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">class-cache</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.hibernate.auction.Item&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">usage</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;read-write&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">class-cache</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.hibernate.auction.Bid&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">usage</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;read-only&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection-cache</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">collection</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.hibernate.auction.Item.bids&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">usage</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;read-write&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">session-factory</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">hibernate-configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>La ventaja de este enfoque es la externalización de los nombres de los archivos de mapeo a la configuración. El <code class="literal">hibernate.cfg.xml</code> también es más práctico una vez que haya afinado el caché de Hibernate. Puede escoger ya sea <code class="literal">hibernate.properties</code> o <code class="literal">hibernate.cfg.xml</code>. Ambos son equivalentes, excepto por los beneficios de utilizar la sintaxis XML que mencionados anteriormente.</p><p>Con la configuración XML, iniciar Hibernate es tan simple como:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">SessionFactory</span><!-- <br/> --><span class="java_plain">&nbsp;sf&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">().</span><!-- <br/> --><span class="java_plain">configure</span><!-- <br/> --><span class="java_separator">().</span><!-- <br/> --><span class="java_plain">buildSessionFactory</span><!-- <br/> --><span class="java_separator">();</span></pre><p>Puede seleccionar un fichero de configuración XML diferente utilizando:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">SessionFactory</span><!-- <br/> --><span class="java_plain">&nbsp;sf&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">configure</span><span class="java_separator">(</span><span class="java_literal">&quot;catdb.cfg.xml&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">buildSessionFactory</span><span class="java_separator">();</span></pre></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-j2ee"/>3.9. Java EE Application Server integration</h2></div></div></div><p>Hibernate tiene los siguientes puntos de integración con la infraestructura J2EE:</p><div class="itemizedlist"><ul><li><p><span class="emphasis"><em>Fuentes de datos administrados por el contenedor</em></span>: Hibernate puede utilizar conexiones JDBC administradas por el contenedor y provistas a través de JNDI. Usualmente, un <code class="literal">TransactionManager</code> compatible con JTA y un <code class="literal">ResourceManager</code> se ocupan de la administración de transacciones (CMT), especialmente del manejo de transacciones distribuídas a través de varias fuentes de datos. También puede demarcar los límites de las transacciones programáticamente (BMT) o puede que quiera utilizar para esto la API opcional de <code class="literal">Transaction</code> de Hibernate para mantener portátil su código.</p></li></ul></div><div class="itemizedlist"><ul><li><p><span class="emphasis"><em>Vinculación Automática JNDI</em></span>: Hibernate puede vincular sus <code class="literal">SessionFactory</code> a JNDI después del inicio.</p></li></ul></div><div class="itemizedlist"><ul><li><p><span class="emphasis"><em>Vinculación de Sesión JTA:</em></span> La <code class="literal">Session</code> de Hibernate se puede vincular automáticamente al ámbito de transacciones JTA. Simplemente busque la <code class="literal">SessionFactory</code> de JNDI y obténga la <code class="literal">Session</code> actual. Deje que Hibernate se ocupe de vaciar y cerrar la <code class="literal">Session</code> cuando se complete su transacción JTA. La demarcación de transacción puede ser declarativa (CMT) o programática (BMT/UserTransaction).</p></li></ul></div><div class="itemizedlist"><ul><li><p><span class="emphasis"><em>Despliegue JMX:</em></span> Si tiene un servidor de aplicaciones con capacidad para JMX (por ejemplo, JBoss AS), puede escoger el desplegar Hibernate como un MBean administrado. Esto le ahorra el código de una línea de inicio para construir su <code class="literal">SessionFactory</code> desde una <code class="literal">Configuration</code>. El contenedor iniciará su <code class="literal">HibernateService</code>, e idealmente también cuidará de las dependencias entre servicios (la fuente de datos debe estar disponible antes de que Hibernate inicie, etc).</p></li></ul></div><p>Dependiendo de su entorno, podría tener que establecer la opción de configuración <code class="literal">hibernate.connection.aggressive_release</code> como true si su servidor de aplicaciones muestra excepciones "contención de conexión".</p><div class="section" lang="es-ES"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-transactionstrategy"/>3.9.1. Configuración de la estrategia de transacción</h3></div></div></div><p>La API de <code class="literal">Session</code> de Hibernate es independiente de cualquier demarcación de transacción en su arquitectura. Si deja que Hibernate utilice JDBC directamente, a través de un pool de conexiones, puede comenzar y acabar sus transacciones llamando la API de JDBC. Si ejecuta en un servidor de aplicaciones J2EE, puede que quiera utilizar transacciones administradas por bean y llamar la API de JTA y <code class="literal">UserTransaction</code> cuando sea necesario.</p><p>Para mantener su código portable entre estos dos (y otros) entornos le recomendamos la API de <code class="literal">Transaction</code> de Hibernate, que envuelve y oculta el sistema subyacente. Tiene que especificar una clase fábrica para las instancias de <code class="literal">Transaction</code> estableciendo la propiedad de configuración <code class="literal">hibernate.transaction.factory_class</code> de Hibernate.</p><p>Existen tres opciones estándares o incorporadas:</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.hibernate.transaction.JDBCTransactionFactory</code></span></dt><dd><p>delega a transacciones de bases de datos (JDBC) (por defecto)</p></dd><dt><span class="term"><code class="literal">org.hibernate.transaction.JTATransactionFactory</code></span></dt><dd><p>delega a transacciones administradas por el contenedor si una transacción existente se encuentra en proceso en este contexto (por ejemplo, un método de bean de sesión EJB). De otra manera, se inicia una nueva transacción y se utilizan las transacciones administradas por bean.</p></dd><dt><span class="term"><code class="literal">org.hibernate.transaction.CMTTransactionFactory</code></span></dt><dd><p>delega a transacciones JTA administradas por el contenedor</p></dd></dl></div><p>También puede definir sus propias estrategias de transacción (por ejemplo, para un servicio de transacción CORBA).</p><p>Algunas funcionalidades en Hibernate (por ejemplo, el caché de segundo nivel, las sesiones contextuales, etc.) requieren acceso al <code class="literal">TransactionManager</code> de JTA en un entorno administrado. En un servidor de aplicaciones tiene que especificar cómo Hibernate debe obtener una referencia al <code class="literal">TransactionManager</code>, ya que J2EE no estandariza un sólo mecanismo:</p><div class="table"><a id="jtamanagerlookup"/><p class="title"><b>Tabla 3.10. TransactionManagers de JTA</b></p><div class="table-contents"><table summary="TransactionManagers de JTA" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Transaction Factory</th><th align="center">Servidor de Aplicaciones</th></tr></thead><tbody><tr><td><code class="literal">org.hibernate.transaction.JBossTransactionManagerLookup</code></td><td align="center">JBoss AS</td></tr><tr><td><code class="literal">org.hibernate.transaction.WeblogicTransactionManagerLookup</code></td><td align="center">Weblogic</td></tr><tr><td><code class="literal">org.hibernate.transaction.WebSphereTransactionManagerLookup</code></td><td align="center">WebSphere</td></tr><tr><td><code class="literal">org.hibernate.transaction.WebSphereExtendedJTATransactionLookup</code></td><td align="center">WebSphere 6</td></tr><tr><td><code class="literal">org.hibernate.transaction.OrionTransactionManagerLookup</code></td><td align="center">Orion</td></tr><tr><td><code class="literal">org.hibernate.transaction.ResinTransactionManagerLookup</code></td><td align="center">Resin</td></tr><tr><td><code class="literal">org.hibernate.transaction.JOTMTransactionManagerLookup</code></td><td align="center">JOTM</td></tr><tr><td><code class="literal">org.hibernate.transaction.JOnASTransactionManagerLookup</code></td><td align="center">JOnAS</td></tr><tr><td><code class="literal">org.hibernate.transaction.JRun4TransactionManagerLookup</code></td><td align="center">JRun4</td></tr><tr><td><code class="literal">org.hibernate.transaction.BESTransactionManagerLookup</code></td><td align="center">Borland ES</td></tr><tr><td><code class="literal">org.hibernate.transaction.JBossTSStandaloneTransactionManagerLookup</code></td><td align="center">JBoss TS used standalone (ie. outside JBoss AS and a JNDI environment generally). Known to work for <code class="literal">org.jboss.jbossts:jbossjta:4.11.0.Final</code></td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-jndi"/>3.9.2. <code class="literal">SessionFactory</code> enlazado a JNDI</h3></div></div></div><p>Una <code class="literal">SessionFactory</code> de Hibernate vinculada a JNDI puede simplificar la búsqueda de la fábrica y la creación de nuevas <code class="literal">Session</code>es. Sin embargo, esto no se relaciona con un <code class="literal">Datasource</code> vinculado a JNDI; simplemente que ambos utilizan el mismo registro.</p><p>Si desea tener la <code class="literal">SessionFactory</code> vinculada a un espacio de nombres de JNDI, especifique un nombre (por ejemplo, <code class="literal">java:hibernate/SessionFactory</code>) utilizando la propiedad <code class="literal">hibernate.session_factory_name</code>. Si se omite esta propiedad, la <code class="literal">SessionFactory</code> no será vinculada a JNDI. Esto es particularmente útil en entornos con una implementación JNDI de sólo lectura por defecto (por ejemplo, en Tomcat).</p><p>Al vincular la <code class="literal">SessionFactory</code> a JNDI, Hibernate utilizará los valores de <code class="literal">hibernate.jndi.url</code>, <code class="literal">hibernate.jndi.class</code> para instanciar un contexto inicial. Si éstos no se especifican, se utilizará el <code class="literal">InitialContext</code> por defecto.</p><p>Hibernate colocará automáticamente la <code class="literal">SessionFactory</code> en JNDI después de que llame a <code class="literal">cfg.buildSessionFactory()</code>. Esto significa que tendrá al menos esta llamada en algún código de inicio o clase de utilidad en su aplicación, a menos de que utilice el despliegue JMX con el <code class="literal">HibernateService</code> (esto se discute más adelante en mayor detalle).</p><p>Si utiliza una <code class="literal">SessionFactory</code> JNDI, un EJB or cualquier otra clase puede llegar a obtener el <code class="literal">SessionFactory</code> utilizando una búsqueda JNDI.</p><p>It is recommended that you bind the <code class="literal">SessionFactory</code> to JNDI in a managed environment and use a <code class="literal">static</code> singleton otherwise. To shield your application code from these details, we also recommend to hide the actual lookup code for a <code class="literal">SessionFactory</code> in a helper class, such as <code class="literal">HibernateUtil.getSessionFactory()</code>. Note that such a class is also a convenient way to startup Hibernate—see chapter 1.</p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-j2ee-currentsession"/>3.9.3. Administración de contexto de Sesión Actual con JTA</h3></div></div></div><p>The easiest way to handle <code class="literal">Sessions</code> and transactions is Hibernate's automatic "current" <code class="literal">Session</code> management. For a discussion of contextual sessions see <a class="xref" href="architecture.html#architecture-current-session" title="2.3. Sesiones contextuales">Sección 2.3, “Sesiones contextuales”</a>. Using the <code class="literal">"jta"</code> session context, if there is no Hibernate <code class="literal">Session</code> associated with the current JTA transaction, one will be started and associated with that JTA transaction the first time you call <code class="literal">sessionFactory.getCurrentSession()</code>. The <code class="literal">Session</code>s retrieved via <code class="literal">getCurrentSession()</code> in the <code class="literal">"jta"</code> context are set to automatically flush before the transaction completes, close after the transaction completes, and aggressively release JDBC connections after each statement. This allows the <code class="literal">Session</code>s to be managed by the life cycle of the JTA transaction to which it is associated, keeping user code clean of such management concerns. Your code can either use JTA programmatically through <code class="literal">UserTransaction</code>, or (recommended for portable code) use the Hibernate <code class="literal">Transaction</code> API to set transaction boundaries. If you run in an EJB container, declarative transaction demarcation with CMT is preferred.</p></div><div class="section" lang="es-ES"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-j2ee-jmx"/>3.9.4. Despliegue JMX</h3></div></div></div><p>La línea <code class="literal">cfg.buildSessionFactory()</code> todavía se tiene que ejecutar en algún sitio para obtener una <code class="literal">SessionFactory</code> en JNDI. Puede hacer esto ya sea en un bloque inicializador <code class="literal">static</code> (como aquel en <code class="literal">HibernateUtil</code>) o bien puede desplegar Hibernate como un <span class="emphasis"><em>servicio administrado</em></span>.</p><p>Hibernate se distribuye con <code class="literal">org.hibernate.jmx.HibernateService</code> para desplegar en un servidor de aplicaciones con capacidades JMX, como JBoss AS. El despliegue y la configuracón reales son específicos del vendedor. He aquí un ejemplo de <code class="literal">jboss-service.xml</code> para JBoss 4.0.x: </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">server</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mbean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">code</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.hibernate.jmx.HibernateService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jboss.jca:service=HibernateFactory,name=HibernateFactory&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Required&nbsp;services&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">depends</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss.jca:service=RARDeployer</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">depends</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">depends</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss.jca:service=LocalTxCM,name=HsqlDS</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">depends</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Bind&nbsp;the&nbsp;Hibernate&nbsp;service&nbsp;to&nbsp;JNDI&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;JndiName&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/hibernate/SessionFactory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Datasource&nbsp;settings&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Datasource&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:HsqlDS</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Dialect&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate.dialect.HSQLDialect</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Transaction&nbsp;integration&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;TransactionStrategy&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.hibernate.transaction.JTATransactionFactory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;TransactionManagerLookupStrategy&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.hibernate.transaction.JBossTransactionManagerLookup</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;FlushBeforeCompletionEnabled&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;AutoCloseSessionEnabled&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Fetching&nbsp;options&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;MaximumFetchDepth&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">5</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Second-level&nbsp;caching&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SecondLevelCacheEnabled&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;CacheProviderClass&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate.cache.EhCacheProvider</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;QueryCacheEnabled&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Logging&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ShowSqlEnabled&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Mapping&nbsp;files&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;MapResources&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">auction/Item.hbm.xml,auction/Category.hbm.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">mbean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">server</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Este archivo se implementa en un directorio llamado <code class="literal">META-INF</code> y se encuentra empacado en un archivo JAR con la extensión <code class="literal">.sar</code> (archivo de servicio). También necesita empacar Hibernate, sus bibliotecas de terceros requeridas, sus clases persistentes compiladas, así como sus archivos de mapeo en el mismo archivo. Sus beans empresariales (usualmente beans de sesión) se pueden dejar en su propio archivo JAR, pero puede incluir este archivo EJB JAR en el archivo de servicio principal para obtener una unidad desplegable en vivo (sin apagarlo). Consulte la documentación de JBoss AS para obtener más información sobre el servicio JMX y la implementación de EJB.</p></div></div></div><HR xmlns=""/><a xmlns="" href="legalnotice.html"><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright © 2004 Red Hat, Inc.</p></a><ul class="docnav"><li class="previous"><a accesskey="p" href="architecture.html"><strong>Anterior</strong>Capítulo 2. Arquitectura</a></li><li class="up"><a accesskey="u" href="#"><strong>Subir</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Inicio</strong></a></li><li class="next"><a accesskey="n" href="persistent-classes.html"><strong>Siguiente</strong>Capítulo 4. Clases persistentes</a></li></ul></body></html>