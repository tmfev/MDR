<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapitre 3. Configuration</title><link rel="stylesheet" href="css/hibernate.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="HIBERNATE - Relational Persistence for Idiomatic Java"/><link rel="up" href="index.html" title="HIBERNATE - Relational Persistence for Idiomatic Java"/><link rel="prev" href="architecture.html" title="Chapitre 2. Architecture"/><link rel="next" href="persistent-classes.html" title="Chapitre 4. Classes persistantes"/><link rel="copyright" href="Legal_Notice.html" title="Legal Notice"/></head><body><p id="title"><a href="http://www.hibernate.org" class="site_href"><strong>Hibernate.org</strong></a><a href="http://hibernate.org/Documentation/DocumentationOverview" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="architecture.html"><strong>Précédent</strong></a></li><li class="next"><a accesskey="n" href="persistent-classes.html"><strong>Suivant</strong></a></li></ul><div class="chapter" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="session-configuration"/>Chapitre 3. Configuration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="session-configuration.html#configuration-programmatic">3.1. Configuration par programmation</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-sessionfactory">3.2. Obtenir une SessionFactory</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-hibernatejdbc">3.3. Connexions JDBC </a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional">3.4. Propriétés de configuration optionnelles</a></span></dt><dd><dl><dt><span class="section"><a href="session-configuration.html#configuration-optional-dialects">3.4.1. Dialectes SQL</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-outerjoin">3.4.2. Chargement par jointure externe</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-binarystreams">3.4.3. Flux binaires</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-cacheprovider">3.4.4. Cache de second niveau et cache de requêtes</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-querysubstitution">3.4.5. Substitution dans le langage de requêtes</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-statistics">3.4.6. Statistiques Hibernate</a></span></dt></dl></dd><dt><span class="section"><a href="session-configuration.html#configuration-logging">3.5. Journalisation</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-namingstrategy">3.6. Sélectionne une NamingStrategy (stratégie de nommage)</a></span></dt><dt><span class="section"><a href="session-configuration.html#d0e3340">3.7. Implementing a PersisterClassProvider</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-xmlconfig">3.8. Fichier de configuration XML</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-j2ee">3.9. Java EE Application Server integration</a></span></dt><dd><dl><dt><span class="section"><a href="session-configuration.html#configuration-optional-transactionstrategy">3.9.1. Configuration de la stratégie transactionnelle</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-optional-jndi">3.9.2. SessionFactory associée au JNDI</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-j2ee-currentsession">3.9.3. Gestion du contexte de la session courante à JTA</a></span></dt><dt><span class="section"><a href="session-configuration.html#configuration-j2ee-jmx">3.9.4. Déploiement JMX</a></span></dt></dl></dd></dl></div><p>Hibernate est conçu pour fonctionner dans de nombreux environnements , c'est pourquoi il existe beaucoup de paramètres de configuration. Heureusement, la plupart ont des valeurs par défaut appropriées et la Hibernate inclut un fichier d'exemples <code class="literal">hibernate.properties</code> dans le répertoire <code class="literal">etc/</code> qui fournit  les différentes options. Vous n'avez qu'à placer ce fichier dans votre classpath et à l'adapter à vos besoins.</p><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-programmatic"/>3.1. Configuration par programmation</h2></div></div></div><p>Une instance de <code class="literal">org.hibernate.cfg.Configuration</code> représente un ensemble de mappages des classes Java d'une application vers la base de données SQL. La <code class="literal">Configuration</code> est utilisée pour construire un objet (immuable) <code class="literal">SessionFactory</code>. Les mappages sont constitués d'un ensemble de fichiers de mappage XML. </p><p>Vous pouvez obtenir une instance de <code class="literal">Configuration</code> en l'instanciant directement et en spécifiant la liste des documents XML de mappage. Si les fichiers de mappage sont dans le classpath, vous pouvez utiliser la méthode <code class="literal">addResource()</code> : </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_plain">&nbsp;cfg&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addResource</span><span class="java_separator">(</span><span class="java_literal">&quot;Item.hbm.xml&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addResource</span><span class="java_separator">(</span><span class="java_literal">&quot;Bid.hbm.xml&quot;</span><span class="java_separator">);</span></pre><p>Une solution alternative consiste à spécifier la classe mappée et à donner à Hibernate la possibilité de trouver les documents de mappage pour vous :</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_plain">&nbsp;cfg&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addClass</span><span class="java_separator">(</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">auction</span><span class="java_separator">.</span><span class="java_type">Item</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addClass</span><span class="java_separator">(</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">auction</span><span class="java_separator">.</span><span class="java_type">Bid</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span></pre><p>Hibernate va rechercher les fichiers de mappages <code class="literal">/org/hibernate/auction/Item.hbm.xml</code> et <code class="literal">/org/hibernate/auction/Bid.hbm.xml</code> dans le classpath. Cette approche élimine les noms de fichiers en dur. </p><p>Une <code class="literal">Configuration</code> vous permet également de préciser des propriétés de configuration. Par exemple :</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_plain">&nbsp;cfg&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addClass</span><span class="java_separator">(</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">auction</span><span class="java_separator">.</span><span class="java_type">Item</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addClass</span><span class="java_separator">(</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">auction</span><span class="java_separator">.</span><span class="java_type">Bid</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setProperty</span><span class="java_separator">(</span><span class="java_literal">&quot;hibernate.dialect&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;org.hibernate.dialect.MySQLInnoDBDialect&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setProperty</span><span class="java_separator">(</span><span class="java_literal">&quot;hibernate.connection.datasource&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;java:comp/env/jdbc/test&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setProperty</span><span class="java_separator">(</span><span class="java_literal">&quot;hibernate.order_updates&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;true&quot;</span><span class="java_separator">);</span></pre><p>Ce n'est pas le seul moyen de passer des propriétés de configuration à Hibernate. Les différentes options sont : </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li><p>Passer une instance de <code class="literal">java.util.Properties</code> à <code class="literal">Configuration.setProperties()</code>. </p></li><li><p>Placer <code class="literal">hibernate.properties</code> dans un répertoire racine du chemin de classe.</p></li><li><p>Positionner les propriétés <code class="literal">System</code> en utilisant <code class="literal">java -Dproperty=value</code>.</p></li><li><p>Inclure des éléments <code class="literal">&lt;property&gt;</code> dans le fichier <code class="literal">hibernate.cfg.xml</code> (voir plus loin). </p></li></ol></div><p>Si vous souhaitez démarrer rapidement, <code class="filename">hibernate.properties</code> est l'approche la plus facile.</p><p><code class="classname">org.hibernate.cfg.Configuration</code> est un objet de démarrage qui sera supprimé une fois qu'une <code class="literal">SessionFactory</code> aura été créée.</p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-sessionfactory"/>3.2. Obtenir une SessionFactory</h2></div></div></div><p>When all mappings have been parsed by the <code class="classname">org.hibernate.cfg.Configuration</code>, the application must obtain a factory for <code class="interfacename">org.hibernate.Session</code> instances. This factory is intended to be shared by all application threads:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">SessionFactory</span><!-- <br/> --><span class="java_plain">&nbsp;sessions&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;cfg</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">buildSessionFactory</span><!-- <br/> --><span class="java_separator">();</span></pre><p>Hibernate does allow your application to instantiate more than one <code class="interfacename">org.hibernate.SessionFactory</code>. This is useful if you are using more than one database.</p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-hibernatejdbc"/>3.3. Connexions JDBC </h2></div></div></div><p>Il est conseillé que <code class="interfacename">org.hibernate.SessionFactory</code> crée les connexions JDBC et les mette dans un pool pour vous. Si vous suivez cette approche, ouvrir une <code class="interfacename">org.hibernate.Session</code> est aussi simple que :</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Session</span><!-- <br/> --><span class="java_plain">&nbsp;session&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;sessions</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">openSession</span><!-- <br/> --><span class="java_separator">();</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_operator">//</span><!-- <br/> --><span class="java_plain">&nbsp;open&nbsp;a&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Session</span></pre><p>Dès que vous initierez une action qui requiert un accès à la base de données, une connexion JDBC sera récupérée dans le pool.</p><p>À cet effet, il faut passer les propriétés de la connexion JDBC à Hibernate. Tous les noms des propriétés Hibernate et leur signification sont définies dans la classe <code class="literal">org.hibernate.cfg.Environment</code>. Nous allons maintenant décrire les paramètres de configuration des connexions JDBC les plus importants. </p><p>Hibernate obtiendra des connexions (et les mettra dans un pool) en utilisant <code class="literal">java.sql.DriverManager</code> si vous positionnez les paramètres de la manière suivante : </p><div class="table"><a id="d0e1778"/><p class="title"><b>Tableau 3.1. Propriétés JDBC de Hibernate</b></p><div class="table-contents"><table summary="Propriétés JDBC de Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nom de la propriété</th><th>Fonction</th></tr></thead><tbody><tr><td><span class="property">hibernate.connection.driver_class</span></td><td><span class="emphasis"><em>JDBC driver class</em></span></td></tr><tr><td><span class="property">hibernate.connection.url</span></td><td><span class="emphasis"><em>JDBC URL</em></span></td></tr><tr><td><span class="property">hibernate.connection.username</span></td><td><span class="emphasis"><em>database user</em></span></td></tr><tr><td><span class="property">hibernate.connection.password</span></td><td><span class="emphasis"><em>database user password</em></span></td></tr><tr><td><span class="property">hibernate.connection.pool_size</span></td><td><span class="emphasis"><em>maximum number of pooled connections</em></span></td></tr></tbody></table></div></div><br class="table-break"/><p>L'algorithme natif de pool de connexions de Hibernate est plutôt rudimentaire. Il a été conçu dans le but de vous aider à démarrer et <span class="emphasis"><em>n'est pas prévu pour un système en production</em></span> ou même pour un test de performance. Utilisez plutôt un pool tiers pour de meilleures performances et une meilleure stabilité : remplacez la propriété <code class="literal">hibernate.connection.pool_size</code> avec les propriétés spécifiques au pool de connexions que vous avez choisi. Cela désactivera le pool de connexions interne de Hibernate. Vous pouvez par exemple utiliser C3P0. </p><p>C3P0 est un pool de connexions JDBC open source distribué avec Hibernate dans le répertoire <code class="literal">lib</code>. Hibernate utilisera son provider <code class="literal">C3P0ConnectionProvider</code> pour le pool de connexions si vous configurez les propriétés <code class="literal">hibernate.c3p0.*</code>. Si vous voulez utiliser Proxool, référez vous au groupe de propriétés <code class="literal">hibernate.properties</code> correspondant et consultez le site web Hibernate pour plus d'informations. </p><p>Voici un exemple de fichier <code class="literal">hibernate.properties</code> pour C3P0: </p><pre class="programlisting">hibernate.connection.driver_class = org.postgresql.Driver
hibernate.connection.url = jdbc:postgresql://localhost/mydatabase
hibernate.connection.username = myuser
hibernate.connection.password = secret
hibernate.c3p0.min_size=5
hibernate.c3p0.max_size=20
hibernate.c3p0.timeout=1800
hibernate.c3p0.max_statements=50
hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect</pre><p>Pour l'utilisation de Hibernate au sein d'un serveur d'applications, il est recommandé de configurer Hibernate presque toujours de façon à ce qu'il obtienne ses connexions de la <code class="literal">DataSource</code> enregistrée du serveur d'applications dans le JNDI. À cet effet, vous devrez définir au moins une des propriétés suivantes : </p><div class="table"><a id="d0e1860"/><p class="title"><b>Tableau 3.2. Propriétés d'une Datasource Hibernate</b></p><div class="table-contents"><table summary="Propriétés d'une Datasource Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nom de la propriété</th><th>Fonction</th></tr></thead><tbody><tr><td><span class="property">hibernate.connection.datasource</span></td><td><span class="emphasis"><em>datasource JNDI name</em></span></td></tr><tr><td><span class="property">hibernate.jndi.url</span></td><td><span class="emphasis"><em>URL du fournisseur JNDI</em></span> (optionnel)</td></tr><tr><td><span class="property">hibernate.jndi.class</span></td><td><span class="emphasis"><em>classe de JNDI <code class="literal">InitialContextFactory</code></em></span> (optionnel)</td></tr><tr><td><span class="property">hibernate.connection.username</span></td><td><span class="emphasis"><em>utilisateur de base de données</em></span> (optionnel)</td></tr><tr><td><span class="property">hibernate.connection.password</span></td><td><span class="emphasis"><em>mot de passe de l'utilisateur de base de données</em></span> (optionnel)</td></tr></tbody></table></div></div><br class="table-break"/><p>Voici un exemple de fichier <code class="literal">hibernate.properties</code> pour l'utilisation d'une datasource JNDI fournie par un serveur d'applications : </p><pre class="programlisting">hibernate.connection.datasource = java:/comp/env/jdbc/test
hibernate.transaction.factory_class = \
    org.hibernate.transaction.JTATransactionFactory
hibernate.transaction.manager_lookup_class = \
    org.hibernate.transaction.JBossTransactionManagerLookup
hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect</pre><p>Les connexions JDBC obtenues à partir d'une datasource JNDI participeront automatiquement aux transactions gérées par le conteneur du serveur d'applications.</p><p>Des propriétés arbitraires de connexion peuvent être passées en préfixant le nom de la propriété par "<code class="literal">hibernate.connnection</code>". Par exemple, vous pouvez spécifier un <code class="literal">charSet</code> en utilisant <code class="literal">hibernate.connection.charSet</code>. </p><p>Vous pouvez fournir votre propre stratégie d'obtention des connexions JDBC en implémentant l'interface <code class="literal">org.hibernate.connection.ConnectionProvider</code>. Vous pouvez sélectionner une implémentation spécifique par la propriété <code class="literal">hibernate.connection.provider_class</code>.</p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-optional"/>3.4. Propriétés de configuration optionnelles</h2></div></div></div><p>Il y a un certain nombre d'autres propriétés qui contrôlent le fonctionnement d'Hibernate à l'exécution. Toutes sont optionnelles et ont comme valeurs par défaut des valeurs raisonnables.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Avertissement</h2><p><span class="emphasis"><em>Some of these properties are "system-level" only.</em></span> System-level properties can be set only via <code class="literal">java -Dproperty=value</code> or <code class="filename">hibernate.properties</code>. They <span class="emphasis"><em>cannot</em></span> be set by the other techniques described above.</p></div><div class="table"><a id="configuration-optional-properties"/><p class="title"><b>Tableau 3.3. Propriétés de configuration Hibernate</b></p><div class="table-contents"><table summary="Propriétés de configuration Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nom de la propriété</th><th>Fonction</th></tr></thead><tbody><tr><td><span class="property">hibernate.dialect</span></td><td>Le nom de la classe d'un <code class="classname">org.hibernate.dialect.Dialect</code> Hibernate qui permet à Hibernate de générer du SQL optimisé pour une base de données relationnelle particulière.  <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">full.classname.of.Dialect</code>  </p> <p>Dans la plupart des cas, Hibernate sera en mesure de choisir l'implémentation <code class="classname">org.hibernate.dialect.Dialect</code> qui convient sur la base des <code class="literal">métadonnées JDBC</code> retournées par le driver JDBC. </p></td></tr><tr><td><span class="property">hibernate.show_sql</span></td><td>Écrit toutes les requêtes SQL sur la console. Il s'agit d'une alternative au paramétrage de la catégorie de log <code class="literal">org.hibernate.SQL</code> à <code class="literal">debug</code>.  <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><span class="property">hibernate.format_sql</span></td><td>Effectue un pretty print du SQL dans la console et dans le log.  <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><span class="property">hibernate.default_schema</span></td><td>Qualifie des noms de table non qualifiés avec le schéma/tablespace dans le SQL généré. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">SCHEMA_NAME</code> </p></td></tr><tr><td><span class="property">hibernate.default_catalog</span></td><td>Qualifie les noms de tables non qualifiées avec ce catalogue dans le SQL généré.   <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">CATALOG_NAME</code> </p></td></tr><tr><td><span class="property">hibernate.session_factory_name</span></td><td><code class="interfacename">org.hibernate.SessionFactory</code> sera automatiquement liée à ce nom dans JNDI après sa création.  <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">jndi/composite/name</code> </p></td></tr><tr><td><span class="property">hibernate.max_fetch_depth</span></td><td>Configure la profondeur maximale d'un arbre de chargement par jointures externes pour les associations à cardinalité unitaire (un-à-un, plusieurs-à-un). Un <code class="literal">0</code> désactive le chargement par défaut par jointure externe. <p><span class="strong"><strong>par ex.</strong></span> valeurs recommandées entre <code class="literal">0</code> et <code class="literal">3</code>  </p></td></tr><tr><td><span class="property">hibernate.default_batch_fetch_size</span></td><td>Configure une taille par défaut pour le chargement par lot des associations Hibernate  <p><span class="strong"><strong>ex.</strong></span> valeurs recommandées : <code class="literal">4</code>, <code class="literal">8</code>, <code class="literal">16</code>  </p></td></tr><tr><td><span class="property">hibernate.default_entity_mode</span></td><td>Sets a default mode for entity representation for all sessions opened from this <code class="literal">SessionFactory</code> <p><code class="literal">dynamic-map</code>, <code class="literal">dom4j</code>, <code class="literal">pojo</code> </p></td></tr><tr><td><span class="property">hibernate.order_updates</span></td><td>Force Hibernate à trier les mises à jour SQL par la valeur de la clé primaire des éléments mis à jour. Cela permet de limiter les deadlocks de transaction dans les systèmes hautement concurrents. <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><span class="property">hibernate.generate_statistics</span></td><td>Si activé, Hibernate va collecter des statistiques utiles pour le réglage des performances.  <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><span class="property">hibernate.use_identifier_rollback</span></td><td>Si activé, les propriétés correspondant à l'identifiant des objets sont remises aux valeurs par défaut lorsque les objets sont supprimés.  <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><span class="property">hibernate.use_sql_comments</span></td><td>Si activé, Hibernate génère des commentaires à l'intérieur des requêtes SQL pour faciliter le débogage, par défaut à <code class="literal">false</code>. <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><span class="property">hibernate.id.new_generator_mappings</span></td><td>Setting is relevant when using <code class="classname">@GeneratedValue</code>. It indicates whether or not the new <code class="classname">IdentifierGenerator</code> implementations are used for <code class="classname">javax.persistence.GenerationType.AUTO</code>, <code class="classname">javax.persistence.GenerationType.TABLE</code> and <code class="classname">javax.persistence.GenerationType.SEQUENCE</code>. Default to <code class="literal">false</code> to keep backward compatibility. <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr></tbody></table></div></div><br class="table-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>We recommend all new projects which make use of to use <code class="classname">@GeneratedValue</code> to also set <code class="code">hibernate.id.new_generator_mappings=true</code> as the new generators are more efficient and closer to the JPA 2 specification semantic. However they are not backward compatible with existing databases (if a sequence or a table is used for id generation).</p></div><div class="table"><a id="configuration-jdbc-properties"/><p class="title"><b>Tableau 3.4. Propriétés Hibernate liées à JDBC et aux connexions</b></p><div class="table-contents"><table summary="Propriétés Hibernate liées à JDBC et aux connexions" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nom de la propriété</th><th>Fonction</th></tr></thead><tbody><tr><td><span class="property">hibernate.jdbc.fetch_size</span></td><td>Une valeur non nulle détermine la taille des chargements JDBC (appelle <code class="literal">Statement.setFetchSize()</code>).</td></tr><tr><td><span class="property">hibernate.jdbc.batch_size</span></td><td>Une valeur non nulle active l'utilisation par Hibernate des mise à jour par lot de JDBC2.  <p><span class="strong"><strong>ex.</strong></span> les valeurs recommandées entre <code class="literal">5</code> et <code class="literal">30</code> </p></td></tr><tr><td><span class="property">hibernate.jdbc.batch_versioned_data</span></td><td>Set this property to <code class="literal">true</code> if your JDBC driver returns correct row counts from <code class="literal">executeBatch()</code>. It is usually safe to turn this option on. Hibernate will then use batched DML for automatically versioned data. Defaults to <code class="literal">false</code>. <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><span class="property">hibernate.jdbc.factory_class</span></td><td>Sélectionne un <code class="interfacename">org.hibernate.jdbc.Batcher</code> personnalisé. La plupart des applications n'auront pas besoin de cette propriété de configuration. <p><span class="strong"><strong>par.ex.</strong></span> <code class="literal">classname.of.BatcherFactory</code> </p></td></tr><tr><td><span class="property">hibernate.jdbc.use_scrollable_resultset</span></td><td>Active l'utilisation par Hibernate des ensembles de résultats déroulants de JDBC2. Cette propriété est seulement nécessaire lorsque l'on utilise des connexions JDBC fournies par l'utilisateur. Autrement, Hibernate utilise les métadonnées de la connexion. <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><span class="property">hibernate.jdbc.use_streams_for_binary</span></td><td>Utilise des flux lorsque l'on écrit/lit des types <code class="literal">binary</code> ou des types  <code class="literal">serializable</code>vers/à partir de JDBC. <span class="emphasis"><em>*system-level property*</em></span> <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><span class="property">hibernate.jdbc.use_get_generated_keys</span></td><td>Active l'utilisation de <code class="literal">PreparedStatement.getGeneratedKeys()</code> de JDBC3 pour récupérer nativement les clés générées après insertion. Nécessite un pilote JDBC3+ et JRE1.4+, configurés à false si votre pilote a des problèmes avec les générateurs d'identifiant Hibernate. Par défaut, essaie de déterminer les possibilités du pilote en utilisant les metadonnées de connexion. <p><span class="strong"><strong>par ex.</strong></span> <code class="literal">true|false</code> </p></td></tr><tr><td><span class="property">hibernate.connection.provider_class</span></td><td>Le nom de la classe d'un <code class="interfacename">org.hibernate.connection.ConnectionProvider</code> personnalisé qui fournit des connexions JDBC à Hibernate. <p><span class="strong"><strong>par ex.</strong></span><code class="literal">classname.of.ConnectionProvider</code>  </p></td></tr><tr><td><span class="property">hibernate.connection.isolation</span></td><td>Définit le niveau d'isolation des transactions JDBC. Regardez <code class="literal">java.sql.Connection</code> pour des valeurs significatives mais notez également que la plupart des bases de données ne supportent pas tous les niveaux d'isolation et que certaines définissent des isolations non standard supplémentaires. <p><span class="strong"><strong>par ex.</strong></span><code class="literal">1, 2, 4, 8</code>  </p></td></tr><tr><td><span class="property">hibernate.connection.autocommit</span></td><td>Active le mode de commit automatique (autocommit) pour les connexions JDBC du pool (non recommandé).  <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><span class="property">hibernate.connection.release_mode</span></td><td>Spécifie à quel moment Hibernate doit relâcher les connexions JDBC. Par défaut, une connexion JDBC est conservée jusqu'à ce que la session soit explicitement fermée ou déconnectée. Pour une source de données JTA d'un serveur d'applications, vous devriez utiliser <code class="literal">after_statement</code> pour libérer les connexions de manière plus agressive après chaque appel JDBC. Pour une connexion non JTA, il est souvent préférable de libérer la connexion à la fin de chaque transaction en utilisant <code class="literal">after_transaction</code>. <code class="literal">auto</code> choisira <code class="literal">after_statement</code> pour les stratégies de transactions JTA et CMT et <code class="literal">after_transaction</code> pour des stratégies de transactions JDBC.  <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">auto</code> (default) | <code class="literal">on_close</code> | <code class="literal">after_transaction</code> | <code class="literal">after_statement</code> </p> <p>This setting only affects <code class="literal">Session</code>s returned from <code class="literal">SessionFactory.openSession</code>. For <code class="literal">Session</code>s obtained through <code class="literal">SessionFactory.getCurrentSession</code>, the <code class="literal">CurrentSessionContext</code> implementation configured for use controls the connection release mode for those <code class="literal">Session</code>s. See <a class="xref" href="architecture.html#architecture-current-session" title="2.3. Sessions contextuelles">Section 2.3, « Sessions contextuelles  »</a> </p></td></tr><tr><td><span class="property">hibernate.connection.</span><span class="emphasis"><em>&lt;propertyName&gt;</em></span></td><td>Passez une propriété JDBC <code class="literal">propertyName</code> à <code class="literal">DriverManager.getConnection()</code>. </td></tr><tr><td><span class="property">hibernate.jndi.</span><span class="emphasis"><em>&lt;propertyName&gt;</em></span></td><td>Passez la propriété <span class="emphasis"><em>&lt;propertyName&gt;</em></span> au JNDI <code class="literal">InitialContextFactory</code>.</td></tr></tbody></table></div></div><br class="table-break"/><div class="table"><a id="configuration-cache-properties"/><p class="title"><b>Tableau 3.5. Propriétés du Cache Hibernate</b></p><div class="table-contents"><table summary="Propriétés du Cache Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nom de la propriété</th><th>Fonction</th></tr></thead><tbody><tr><td><code class="literal">hibernate.cache.provider_class</code></td><td>Le nom de classe d'un <code class="literal">CacheProvider</code> personnalisé. <p><span class="strong"><strong>par ex.</strong></span><code class="literal">classname.of.CacheProvider</code>  </p></td></tr><tr><td><code class="literal">hibernate.cache.use_minimal_puts</code></td><td>Optimise le cache de second niveau en minimisant les écritures, au prix de plus de lectures. Ce paramètre est surtout utile pour les caches en cluster,et est activé par défaut dans hibernate3 pour les implémentations de cache en cluster.   <p><span class="strong"><strong>par ex.</strong></span> <code class="literal">true|false</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.use_query_cache</code></td><td>Activer le cache de requête, les requêtes individuelles doivent tout de même être déclarées comme pouvant être mises en cache. <p><span class="strong"><strong>par ex.</strong></span> <code class="literal">true|false</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.use_second_level_cache</code></td><td>Peut être utilisé pour désactiver complètement le cache de second niveau qui est activé par défaut pour les classes qui spécifient un élément <code class="literal">&lt;cache&gt;</code> dans leur mappage.   <p><span class="strong"><strong>par ex.</strong></span> <code class="literal">true|false</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.query_cache_factory</code></td><td>Le nom de classe d'une interface <code class="literal">QueryCache</code> personnalisée, par défaut prend la valeur du <code class="literal">StandardQueryCache</code> imbriqué. <p><span class="strong"><strong>par ex.</strong></span><code class="literal">classname.of.QueryCache</code>  </p></td></tr><tr><td><code class="literal">hibernate.cache.region_prefix</code></td><td>Un préfixe à utiliser pour les noms de régions du cache de second niveau.  <p><span class="strong"><strong>par ex.</strong></span> <code class="literal">prefix</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.use_structured_entries</code></td><td>Force Hibernate à stocker les données dans le cache de second niveau en un format plus adapté à la visualisation.  <p><span class="strong"><strong>par ex.</strong></span> <code class="literal">true|false</code> </p></td></tr><tr><td><code class="literal">hibernate.cache.default_cache_concurrency_strategy</code></td><td>Setting used to give the name of the default <code class="classname">org.hibernate.annotations.CacheConcurrencyStrategy</code> to use when either <code class="classname">@Cacheable</code> or <code class="classname">@Cache</code> is used. <code class="code">@Cache(strategy="..")</code> is used to override this default.</td></tr></tbody></table></div></div><br class="table-break"/><div class="table"><a id="configuration-transaction-properties"/><p class="title"><b>Tableau 3.6. Propriétés des transactions Hibernate</b></p><div class="table-contents"><table summary="Propriétés des transactions Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nom de la propriété</th><th>Fonction</th></tr></thead><tbody><tr><td><code class="literal">hibernate.transaction.factory_class</code></td><td>Le nom de classe d'une <code class="literal">TransactionFactory</code> qui sera utilisée par l'API <code class="literal">Transaction</code> de Hibernate (la valeur par défaut est <code class="literal">JDBCTransactionFactory</code>).  <p><span class="strong"><strong>par ex.</strong></span><code class="literal">classname.of.TransactionFactory</code>  </p></td></tr><tr><td><code class="literal">jta.UserTransaction</code></td><td>Le nom JNDI utilisé par la <code class="literal">JTATransactionFactory</code> pour obtenir la <code class="literal">UserTransaction</code> JTA du serveur d'applications. <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">jndi/composite/name</code> </p></td></tr><tr><td><code class="literal">hibernate.transaction.manager_lookup_class</code></td><td>Le nom de la classe d'une <code class="literal">TransactionManagerLookup</code> - requise lorsque le cache de niveau JVM est activé ou lorsque l'on utilise un générateur hilo dans un environnement JTA. <p><span class="strong"><strong>par ex.</strong></span><code class="literal">classname.of.TransactionManagerLookup</code>  </p></td></tr><tr><td><code class="literal">hibernate.transaction.flush_before_completion</code></td><td>If enabled, the session will be automatically flushed during the before completion phase of the transaction. Built-in and automatic session context management is preferred, see <a class="xref" href="architecture.html#architecture-current-session" title="2.3. Sessions contextuelles">Section 2.3, « Sessions contextuelles  »</a>. <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><code class="literal">hibernate.transaction.auto_close_session</code></td><td>If enabled, the session will be automatically closed during the after completion phase of the transaction. Built-in and automatic session context management is preferred, see <a class="xref" href="architecture.html#architecture-current-session" title="2.3. Sessions contextuelles">Section 2.3, « Sessions contextuelles  »</a>. <p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr></tbody></table></div></div><br class="table-break"/><div class="table"><a id="configuration-misc-properties"/><p class="title"><b>Tableau 3.7. Propriétés diverses</b></p><div class="table-contents"><table summary="Propriétés diverses" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Nom de la propriété</th><th>Fonction</th></tr></thead><tbody><tr><td><code class="literal">hibernate.current_session_context_class</code></td><td>Supply a custom strategy for the scoping of the "current" <code class="literal">Session</code>. See <a class="xref" href="architecture.html#architecture-current-session" title="2.3. Sessions contextuelles">Section 2.3, « Sessions contextuelles  »</a> for more information about the built-in strategies. <p><span class="strong"><strong>e.g.</strong></span> <code class="literal">jta</code> | <code class="literal">thread</code> | <code class="literal">managed</code> | <code class="literal">custom.Class</code> </p></td></tr><tr><td><code class="literal">hibernate.query.factory_class</code></td><td>Choisit l'implémentation du parseur de requête HQL.  <p><span class="strong"><strong>par ex.</strong></span><code class="literal">org.hibernate.hql.ast.ASTQueryTranslatorFactory</code> ou <code class="literal">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</code>  </p></td></tr><tr><td><code class="literal">hibernate.query.substitutions</code></td><td>Lien entre les jetons de requêtes Hibernate et les jetons SQL (les jetons peuvent être des fonctions ou des noms textuels par exemple). <p><span class="strong"><strong>par ex.</strong></span><code class="literal">hqlLiteral=SQL_LITERAL, hqlFunction=SQLFUNC</code>  </p></td></tr><tr><td><code class="literal">hibernate.hbm2ddl.auto</code></td><td>Valide ou exporte automatiquement le schéma DDL vers la base de données lorsque la <code class="literal">SessionFactory</code> est créée. La valeur <code class="literal">create-drop</code> permet de supprimer le schéma de base de données lorsque la <code class="literal">SessionFactory</code> est fermée explicitement. <p><span class="strong"><strong>par ex.</strong></span><code class="literal">validate</code> | <code class="literal">update</code> | <code class="literal">create</code> | <code class="literal">create-drop</code>  </p></td></tr><tr><td><code class="literal">hibernate.hbm2ddl.import_files</code></td><td><p>Comma-separated names of the optional files containing SQL DML statements executed during the <code class="classname">SessionFactory</code> creation. This is useful for testing or demoing: by adding INSERT statements for example you can populate your database with a minimal set of data when it is deployed.</p><p>File order matters, the statements of a give file are executed before the statements of the following files. These statements are only executed if the schema is created ie if <code class="literal">hibernate.hbm2ddl.auto</code> is set to <code class="literal">create</code> or <code class="literal">create-drop</code>.</p><p><span class="strong"><strong>e.g.</strong></span> <code class="literal">/humans.sql,/dogs.sql</code> </p></td></tr><tr><td><code class="literal">hibernate.bytecode.use_reflection_optimizer</code></td><td><p>Enables the use of bytecode manipulation instead of runtime reflection. This is a System-level property and cannot be set in <code class="literal">hibernate.cfg.xml</code>. Reflection can sometimes be useful when troubleshooting. Hibernate always requires either CGLIB or javassist even if you turn off the optimizer.</p><p> <span class="strong"><strong>par ex.</strong></span><code class="literal">true</code> | <code class="literal">false</code>   </p></td></tr><tr><td><code class="literal">hibernate.bytecode.provider</code></td><td><p>Both javassist or cglib can be used as byte manipulation engines; the default is <code class="literal">javassist</code>.</p><p><span class="strong"><strong>e.g.</strong></span> <code class="literal">javassist</code> | <code class="literal">cglib</code> </p></td></tr></tbody></table></div></div><br class="table-break"/><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-dialects"/>3.4.1. Dialectes SQL</h3></div></div></div><p>Il est recommandé de toujours positionner la propriété <code class="literal">hibernate.dialect</code> à la sous-classe de <code class="literal">org.hibernate.dialect.Dialect</code> appropriée à votre base de données. Si vous spécifiez un dialecte, Hibernate utilisera des valeurs adaptées pour certaines autres propriétés listées ci-dessus, vous évitant ainsi de l'effectuer à la main. </p><div class="table"><a id="sql-dialects"/><p class="title"><b>Tableau 3.8. Dialectes SQL de Hibernate (<code class="literal">hibernate.dialect</code>)</b></p><div class="table-contents"><table summary="Dialectes SQL de Hibernate (hibernate.dialect)" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>RDBMS</th><th>Dialecte</th></tr></thead><tbody><tr><td>DB2</td><td><code class="literal">org.hibernate.dialect.DB2Dialect</code></td></tr><tr><td>DB2 AS/400</td><td><code class="literal">org.hibernate.dialect.DB2400Dialect</code></td></tr><tr><td>DB2 OS390</td><td><code class="literal">org.hibernate.dialect.DB2390Dialect</code></td></tr><tr><td>PostgreSQL</td><td><code class="literal">org.hibernate.dialect.PostgreSQLDialect</code></td></tr><tr><td>MySQL5</td><td><code class="literal">org.hibernate.dialect.MySQL5Dialect</code></td></tr><tr><td>MySQL5 with InnoDB</td><td><code class="literal">org.hibernate.dialect.MySQL5InnoDBDialect</code></td></tr><tr><td>MySQL with MyISAM</td><td><code class="literal">org.hibernate.dialect.MySQLMyISAMDialect</code></td></tr><tr><td>Oracle (toutes versions)</td><td><code class="literal">org.hibernate.dialect.OracleDialect</code></td></tr><tr><td>Oracle 9i</td><td><code class="literal">org.hibernate.dialect.Oracle9iDialect</code></td></tr><tr><td>Oracle 10g</td><td><code class="literal">org.hibernate.dialect.Oracle10gDialect</code></td></tr><tr><td>Oracle 11g</td><td><code class="literal">org.hibernate.dialect.Oracle10gDialect</code></td></tr><tr><td>Sybase</td><td><code class="literal">org.hibernate.dialect.SybaseASE15Dialect</code></td></tr><tr><td>Sybase Anywhere</td><td><code class="literal">org.hibernate.dialect.SybaseAnywhereDialect</code></td></tr><tr><td>Microsoft SQL Server 2000</td><td><code class="literal">org.hibernate.dialect.SQLServerDialect</code></td></tr><tr><td>Microsoft SQL Server 2005</td><td><code class="literal">org.hibernate.dialect.SQLServer2005Dialect</code></td></tr><tr><td>Microsoft SQL Server 2008</td><td><code class="literal">org.hibernate.dialect.SQLServer2008Dialect</code></td></tr><tr><td>SAP DB</td><td><code class="literal">org.hibernate.dialect.SAPDBDialect</code></td></tr><tr><td>Informix</td><td><code class="literal">org.hibernate.dialect.InformixDialect</code></td></tr><tr><td>HypersonicSQL</td><td><code class="literal">org.hibernate.dialect.HSQLDialect</code></td></tr><tr><td>H2 Database</td><td><code class="literal">org.hibernate.dialect.H2Dialect</code></td></tr><tr><td>Ingres</td><td><code class="literal">org.hibernate.dialect.IngresDialect</code></td></tr><tr><td>Progress</td><td><code class="literal">org.hibernate.dialect.ProgressDialect</code></td></tr><tr><td>Mckoi SQL</td><td><code class="literal">org.hibernate.dialect.MckoiDialect</code></td></tr><tr><td>Interbase</td><td><code class="literal">org.hibernate.dialect.InterbaseDialect</code></td></tr><tr><td>Pointbase</td><td><code class="literal">org.hibernate.dialect.PointbaseDialect</code></td></tr><tr><td>FrontBase</td><td><code class="literal">org.hibernate.dialect.FrontbaseDialect</code></td></tr><tr><td>Firebird</td><td><code class="literal">org.hibernate.dialect.FirebirdDialect</code></td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-outerjoin"/>3.4.2. Chargement par jointure externe</h3></div></div></div><p>Si votre base de données supporte les jointures externes de type ANSI, Oracle ou Sybase, <span class="emphasis"><em>le chargement par jointure externe</em></span> devrait améliorer les performances en limitant le nombre d'aller-retour avec la base de données (la base de données effectuant donc potentiellement plus de travail). Le chargement par jointure ouverte permet à un graphe entier d'objets connectés par une relation plusieurs-à-un, un-à-plusieurs ou un-à-un d'être chargé en un seul SQL<code class="literal">SELECT</code>.</p><p>Le chargement par jointure ouverte peut être désactivé <span class="emphasis"><em>globalement</em></span> en mettant la propriété <code class="literal">hibernate.max_fetch_depth</code> à <code class="literal">0</code>. Une valeur de <code class="literal">1</code> ou plus active le chargement par jointure externe pour les associations un-à-un et plusieurs-à-un qui ont été mappées avec <code class="literal">fetch="join"</code>. </p><p>See <a class="xref" href="performance.html#performance-fetching" title="21.1. Stratégies de chargement">Section 21.1, « Stratégies de chargement »</a> for more information.</p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-binarystreams"/>3.4.3. Flux binaires</h3></div></div></div><p>Oracle limite la taille d'un tableau d'<code class="literal">octets</code> qui peuvent être passés vers et à partir de son pilote JDBC. Si vous souhaitez utiliser des instances larges de type <code class="literal">binary</code> ou <code class="literal">serializable</code>, vous devez activer la propriété <code class="literal">hibernate.jdbc.use_streams_for_binary</code>. <span class="emphasis"><em>C'est une fonctionalité de niveau système uniquement.</em></span></p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-cacheprovider"/>3.4.4. Cache de second niveau et cache de requêtes</h3></div></div></div><p>The properties prefixed by <code class="literal">hibernate.cache</code> allow you to use a process or cluster scoped second-level cache system with Hibernate. See the <a class="xref" href="performance.html#performance-cache" title="21.2. Le cache de second niveau">Section 21.2, « Le cache de second niveau »</a> for more information.</p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-querysubstitution"/>3.4.5. Substitution dans le langage de requêtes</h3></div></div></div><p>Vous pouvez définir de nouveaux jetons dans les requêtes Hibernate en utilisant <code class="literal">hibernate.query.substitutions</code>. Par exemple :</p><pre class="programlisting">hibernate.query.substitutions true=1, false=0</pre><p>Cela signifierait que les jetons <code class="literal">true</code> et <code class="literal">false</code>  seraient transformés par des entiers dans le SQL généré.</p><pre class="programlisting">hibernate.query.substitutions toLowercase=LOWER</pre><p>Cela permettrait de renommer la fonction SQL <code class="literal">LOWER</code>.</p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-statistics"/>3.4.6. Statistiques Hibernate</h3></div></div></div><p>Si vous activez <code class="literal">hibernate.generate_statistics</code>, Hibernate fournira un certain nombre de métriques utiles pour régler les performances d'une application qui tourne via <code class="literal">SessionFactory.getStatistics()</code>. Hibernate peut aussi être configuré pour exposer ces statistiques via JMX. Lisez les Javadoc des interfaces dans le paquetage <code class="literal">org.hibernate.stats</code> pour plus d'informations. </p></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-logging"/>3.5. Journalisation</h2></div></div></div><p>Hibernate utilise <a class="ulink" href="http://www.slf4j.org/">Simple Logging Facade for Java</a> (SLF4J) pour enregistrer divers événements du système. SLF4J peut diriger votre sortie de logging vers plusieurs structures de loggings (NOP, Simple, log4j version 1.2, JDK 1.4 logging, JCL or logback) suivant la liaison que vous choisirez. Pour pouvoir configurer votre logging, vous aurez besoin de <code class="filename">slf4j-api.jar</code> dans votre chemin de classe, ainsi que du fichier jar pour votre liaison préférée - <code class="filename">slf4j-log4j12.jar</code> pour Log4J. Voir la documentation SLF4J <a class="ulink" href="http://www.slf4j.org/manual.html">documentation</a> pour davantage d'informations. Pour utiliser Log4j, vous aurez aussi besoin de mettre un fichier <code class="filename">log4j.properties</code> dans votre chemin de classe. Un exemple de fichier de propriétés est distribué avec Hibernate dans le répertoire <code class="literal">src/</code>.</p><p>Il est vivement recommandé de vous familiariser avec les messages des logs de Hibernate. Beaucoup de soin a été apporté pour donner le plus de détails possible sans les rendre illisibles. C'est un outil essentiel en cas de problèmes. Les catégories de logs les plus intéressantes sont les suivantes : </p><div class="table"><a id="log-categories"/><p class="title"><b>Tableau 3.9. Catégories de logs de Hibernate</b></p><div class="table-contents"><table summary="Catégories de logs de Hibernate" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Catégorie</th><th>Fonction</th></tr></thead><tbody><tr><td><code class="literal">org.hibernate.SQL</code></td><td>Journalise toutes les requêtes SQL de type DML (gestion des données) qui sont exécutées</td></tr><tr><td><code class="literal">org.hibernate.type</code></td><td>Journalise tous les paramètres JDBC</td></tr><tr><td><code class="literal">org.hibernate.tool.hbm2ddl</code></td><td>Journalise toutes les requêtes SQL de type DDL (gestion de la structure de la base) qui sont exécutées</td></tr><tr><td><code class="literal">org.hibernate.pretty</code></td><td>Journalise l'état de toutes les entités (20 entités maximum) associées avec la session Hibernate au moment du flush</td></tr><tr><td><code class="literal">org.hibernate.cache</code></td><td>Journalise toute activité du cache de second niveau</td></tr><tr><td><code class="literal">org.hibernate.transaction</code></td><td>Journalise toute activité relative aux transactions</td></tr><tr><td><code class="literal">org.hibernate.jdbc</code></td><td>Journalise toute acquisition de ressource JDBC </td></tr><tr><td><code class="literal">org.hibernate.hql.ast.AST</code></td><td>Journalise l'arbre syntaxique des requêtes HQL et SQL durant l'analyse syntaxique des requêtes</td></tr><tr><td><code class="literal">org.hibernate.secure</code></td><td>Journalise toutes les demandes d'autorisation JAAS</td></tr><tr><td><code class="literal">org.hibernate</code></td><td>Journalise tout (beaucoup d'informations, mais très utile pour résoudre les problèmes).</td></tr></tbody></table></div></div><br class="table-break"/><p>Lorsque vous développez des applications avec Hibernate, vous devriez quasiment toujours travailler avec le niveau <code class="literal">debug</code> activé pour la catégorie <code class="literal">org.hibernate.SQL</code>, ou sinon avec la propriété <code class="literal">hibernate.show_sql</code> activée.</p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-namingstrategy"/>3.6. Sélectionne une <code class="literal">NamingStrategy</code> (stratégie de nommage)</h2></div></div></div><p>L'interface <code class="literal">org.hibernate.cfg.NamingStrategy</code> vous permet de spécifier une "stratégie de nommage" des objets et éléments de la base de données.</p><p>Vous pouvez fournir des règles pour automatiquement générer les identifiants de base de données à partir des identifiants Java, ou transformer une colonne ou table "logique" donnée dans le fichier de mappage en une colonne ou table "physique". Cette fonctionnalité aide à réduire la verbosité de documents de mappage, en éliminant le bruit répétitif (les préfixes <code class="literal">TBL_</code> par exemple). La stratégie par défaut utilisée par Hibernate est assez minimale.</p><p>Vous pouvez définir une stratégie différente en appelant <code class="literal">Configuration.setNamingStrategy()</code> avant d'ajouter des mappages : </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">SessionFactory</span><!-- <br/> --><span class="java_plain">&nbsp;sf&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setNamingStrategy</span><span class="java_separator">(</span><span class="java_type">ImprovedNamingStrategy</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addFile</span><span class="java_separator">(</span><span class="java_literal">&quot;Item.hbm.xml&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addFile</span><span class="java_separator">(</span><span class="java_literal">&quot;Bid.hbm.xml&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">buildSessionFactory</span><span class="java_separator">();</span></pre><p><code class="literal">net.sf.hibernate.cfg.ImprovedNamingStrategy</code> est une stratégie fournie qui peut être utile comme point de départ de quelques applications.</p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3340"/>3.7. Implementing a PersisterClassProvider</h2></div></div></div><p>You can configure the persister implementation used to persist your entities and collections:</p><div class="itemizedlist"><ul><li><p>by default, Hibernate uses persisters that make sense in a relational model and follow Java Persistence's specification</p></li><li><p>you can define a <code class="classname">PersisterClassProvider</code> implementation that provides the persister class used of a given entity or collection</p></li><li><p>finally, you can override them on a per entity and collection basis in the mapping using <code class="classname">@Persister</code> or its XML equivalent</p></li></ul></div><p>The latter in the list the higher in priority.</p><p>You can pass the <code class="classname">PersisterClassProvider</code> instance to the <code class="classname">Configuration</code> object.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">SessionFactory</span><!-- <br/> --><span class="java_plain">&nbsp;sf&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">setPersisterClassProvider</span><span class="java_separator">(</span><span class="java_plain">customPersisterClassProvider</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">addAnnotatedClass</span><span class="java_separator">(</span><span class="java_type">Order</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">buildSessionFactory</span><span class="java_separator">();</span></pre><p>The persister class provider methods, when returning a non null persister class, override the default Hibernate persisters. The entity name or the collection role are passed to the methods. It is a nice way to centralize the overriding logic of the persisters instead of spreading them on each entity or collection mapping.</p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-xmlconfig"/>3.8. Fichier de configuration XML</h2></div></div></div><p>Une approche alternative est de spécifier toute la configuration dans un fichier nommé <code class="literal">hibernate.cfg.xml</code>. Ce fichier peut être utilisé à la place du fichier <code class="literal">hibernate.properties</code>, voire même peut servir à surcharger les propriétés si les deux fichiers sont présents.</p><p>Le fichier de configuration XML doit par défaut se placer à la racine du <code class="literal">CLASSPATH</code>. En voici un exemple : </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version='1.0'&nbsp;encoding='utf-8'?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">hibernate-configuration</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;-//Hibernate/Hibernate&nbsp;Configuration&nbsp;DTD//EN&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">hibernate-configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;a&nbsp;SessionFactory&nbsp;instance&nbsp;listed&nbsp;as&nbsp;/jndi/name&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">session-factory</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;java:hibernate/SessionFactory&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;properties&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;connection.datasource&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/comp/env/jdbc/MyDB</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;dialect&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate.dialect.MySQLDialect</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;show_sql&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">false</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;transaction.factory_class&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.hibernate.transaction.JTATransactionFactory</span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jta.UserTransaction&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:comp/UserTransaction</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">property</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;mapping&nbsp;files&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mapping</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org/hibernate/auction/Item.hbm.xml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mapping</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org/hibernate/auction/Bid.hbm.xml&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;cache&nbsp;settings&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">class-cache</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.hibernate.auction.Item&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">usage</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;read-write&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">class-cache</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.hibernate.auction.Bid&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">usage</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;read-only&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">collection-cache</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">collection</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.hibernate.auction.Item.bids&quot;</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">usage</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;read-write&quot;</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">session-factory</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">hibernate-configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Comme vous pouvez le constater, l'avantage de cette approche est l'externalisation des noms des fichiers de mappage de la configuration. Le fichier <code class="literal">hibernate.cfg.xml</code> est également plus pratique quand on commence à régler le cache d'Hibernate. Notez que vous pouvez choisir entre utiliser <code class="literal">hibernate.properties</code> ou <code class="literal">hibernate.cfg.xml</code>, les deux sont équivalents, sauf en ce qui concerne les bénéfices de l'utilisation de la syntaxe XML mentionnés ci-dessus. </p><p>Avec la configuration XML, démarrer Hibernate devient donc aussi simple que ceci : </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">SessionFactory</span><!-- <br/> --><span class="java_plain">&nbsp;sf&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">().</span><!-- <br/> --><span class="java_plain">configure</span><!-- <br/> --><span class="java_separator">().</span><!-- <br/> --><span class="java_plain">buildSessionFactory</span><!-- <br/> --><span class="java_separator">();</span></pre><p>Vous pouvez choisir un fichier de configuration XML différent en utilisant : </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">SessionFactory</span><!-- <br/> --><span class="java_plain">&nbsp;sf&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">configure</span><span class="java_separator">(</span><span class="java_literal">&quot;catdb.cfg.xml&quot;</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">buildSessionFactory</span><span class="java_separator">();</span></pre></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="configuration-j2ee"/>3.9. Java EE Application Server integration</h2></div></div></div><p>Hibernate possède les points d'intégration suivants pour l'infrastructure J2EE :</p><div class="itemizedlist"><ul><li><p><span class="emphasis"><em>Source de données gérée par le conteneur</em></span> : Hibernate peut utiliser des connexions JDBC gérées par le conteneur et fournies par l'intermédiaire de JNDI. Souvent, un <code class="literal">TransactionManager</code> compatible JTA et un <code class="literal">ResourceManager</code> s'occupent de la gestion des transactions (CMT). Ils sont conçus en particulier pour gérer des transactions distribuées sur plusieurs sources de données. Vous pouvez biensûr également définir les limites des transactions dans votre programme (BMT) ou vous pouvez par ailleurs utiliser l'API optionnelle <code class="literal">Transaction</code> de Hibernate qui vous garantira la portabilité de votre code entre plusieurs serveurs d'application. </p></li></ul></div><div class="itemizedlist"><ul><li><p><span class="emphasis"><em>Association JNDI automatique</em></span>: Hibernate peut associer sa <code class="literal">SessionFactory</code> à JNDI après le démarrage.</p></li></ul></div><div class="itemizedlist"><ul><li><p><span class="emphasis"><em>Association de la Session à JTA:</em></span> la <code class="literal">Session</code> Hibernate peut être automatiquement associée à la portée des transactions JTA si vous utilisez les EJB. Vous avez juste à récupérer la <code class="literal">SessionFactory</code> depuis JNDI et à récupérer la <code class="literal">Session</code> courante. Hibernate s'occupe de vider et fermer la <code class="literal">Session</code> lorsque votre transaction JTA se termine. La démarcation des transactions se fait de manière déclarative (CMT) ou de façon programmatique (BMT/UserTransaction).</p></li></ul></div><div class="itemizedlist"><ul><li><p><span class="emphasis"><em>Déploiement JMX :</em></span>Si vous avez un serveur d'applications compatible JMX (JBoss AS par exemple), vous pouvez choisir de déployer Hibernate en tant que MBean géré par le serveur. Cela vous évite de coder la ligne de démarrage qui permet de construire la <code class="literal">SessionFactory</code> depuis la <code class="literal">Configuration</code>. Le conteneur va démarrer votre <code class="literal">HibernateService</code>, et va idéalement s'occuper des dépendances entre les services (la source de données doit être disponible avant le démarrage de Hibernate, etc). </p></li></ul></div><p>En fonction de votre environnement, vous mettrez l'option de configuration <code class="literal">hibernate.connection.aggressive_release</code> à true si le serveur d'applications affiche des exceptions de type "connection containment".</p><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-transactionstrategy"/>3.9.1. Configuration de la stratégie transactionnelle</h3></div></div></div><p>L'API de la <code class="literal">Session</code> Hibernate est indépendante de tout système de démarcation des transactions, présent dans votre architecture. Si vous laissez Hibernate utiliser l'API JDBC directement via un pool de connexion, vous commencerez et terminerez vos transactions en appelant l'API JDBC. Si votre application tourne à l'intérieur d'un serveur d'applications J2EE, vous utiliserez peut être les transactions gérées par les beans (BMT) et vous appellerez l'API JTA et <code class="literal">UserTransaction</code> lorsque cela est nécessaire. </p><p>Pour conserver votre code portable entre ces deux environnements (et d'autres), nous vous recommandons d'utiliser l'API optionnelle <code class="literal">Transaction</code> d'Hibernate, qui encapsule et masque le système de transaction sous-jacent. Pour cela, vous devez préciser une classe de fabrique d'instances de <code class="literal">Transaction</code> en positionnant la propriété de configuration <code class="literal">hibernate.transaction.factory_class</code>.</p><p>Il existe trois choix standards (intégrés) : </p><div class="variablelist"><dl><dt><span class="term"><code class="literal">org.hibernate.transaction.JDBCTransactionFactory</code></span></dt><dd><p>délègue aux transactions de la base de données (JDBC) (valeur par défaut).</p></dd><dt><span class="term"><code class="literal">org.hibernate.transaction.JTATransactionFactory</code></span></dt><dd><p>délègue à CMT si une transaction existante est sous ce contexte (par ex : méthode d'un EJB session), sinon une nouvelle transaction est entamée et une transaction gérée par le bean est utilisée. </p></dd><dt><span class="term"><code class="literal">org.hibernate.transaction.CMTTransactionFactory</code></span></dt><dd><p>délègue aux transactions JTA gérées par le conteneur</p></dd></dl></div><p>Vous pouvez également définir vos propres stratégies transactionnelles (pour un service de transaction CORBA par exemple). </p><p>Certaines fonctionnalités de Hibernate (c'est-à-dire le cache de second niveau, l'association automatique des Sessions à JTA, etc.) nécessitent l'accès au <code class="literal">TransactionManager</code> JTA dans un environnement géré. Dans un serveur d'applications, vous devez indiquer comment Hibernate peut obtenir une référence vers le <code class="literal">TransactionManager</code>, car J2EE ne fournit pas un seul mécanisme standard. </p><div class="table"><a id="jtamanagerlookup"/><p class="title"><b>Tableau 3.10. TransactionManagers JTA</b></p><div class="table-contents"><table summary="TransactionManagers JTA" border="1"><colgroup><col/><col/></colgroup><thead><tr><th>Fabrique de transaction</th><th align="center">Serveur d'applications</th></tr></thead><tbody><tr><td><code class="literal">org.hibernate.transaction.JBossTransactionManagerLookup</code></td><td align="center">JBoss AS</td></tr><tr><td><code class="literal">org.hibernate.transaction.WeblogicTransactionManagerLookup</code></td><td align="center">Weblogic</td></tr><tr><td><code class="literal">org.hibernate.transaction.WebSphereTransactionManagerLookup</code></td><td align="center">WebSphere</td></tr><tr><td><code class="literal">org.hibernate.transaction.WebSphereExtendedJTATransactionLookup</code></td><td align="center">WebSphere 6</td></tr><tr><td><code class="literal">org.hibernate.transaction.OrionTransactionManagerLookup</code></td><td align="center">Orion</td></tr><tr><td><code class="literal">org.hibernate.transaction.ResinTransactionManagerLookup</code></td><td align="center">Resin</td></tr><tr><td><code class="literal">org.hibernate.transaction.JOTMTransactionManagerLookup</code></td><td align="center">JOTM</td></tr><tr><td><code class="literal">org.hibernate.transaction.JOnASTransactionManagerLookup</code></td><td align="center">JOnAS</td></tr><tr><td><code class="literal">org.hibernate.transaction.JRun4TransactionManagerLookup</code></td><td align="center">JRun4</td></tr><tr><td><code class="literal">org.hibernate.transaction.BESTransactionManagerLookup</code></td><td align="center">Borland ES</td></tr><tr><td><code class="literal">org.hibernate.transaction.JBossTSStandaloneTransactionManagerLookup</code></td><td align="center">JBoss TS used standalone (ie. outside JBoss AS and a JNDI environment generally). Known to work for <code class="literal">org.jboss.jbossts:jbossjta:4.11.0.Final</code></td></tr></tbody></table></div></div><br class="table-break"/></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-optional-jndi"/>3.9.2. <code class="literal">SessionFactory</code> associée au JNDI</h3></div></div></div><p>Une <code class="literal">SessionFactory</code> Hibernate associée au JNDI peut simplifier l'accès à la fabrique et donc la création de nouvelles <code class="literal">Session</code> s. Notez que cela n'est pas lié avec les <code class="literal">Datasource</code> associées au JNDI, elles utilisent juste le même registre ! </p><p>Si vous désirez associer la <code class="literal">SessionFactory</code> à un nom JNDI, spécifiez un nom (par ex. <code class="literal">java:hibernate/SessionFactory</code>) en utilisant la propriété <code class="literal">hibernate.session_factory_name</code>. Si cette propriété est omise, la <code class="literal">SessionFactory</code> ne sera pas associée au JNDI (c'est particulièrement pratique dans les environnements ayant une implémentation JNDI par défaut en lecture seule, comme c'est le cas pour Tomcat). </p><p>Lorsqu'il associe la <code class="literal">SessionFactory</code> au JNDI, Hibernate utilisera les valeurs de <code class="literal">hibernate.jndi.url</code>, <code class="literal">hibernate.jndi.class</code> pour instancier un contexte d'initialisation. S'ils ne sont pas spécifiés, l'<code class="literal">InitialContext</code> par défaut sera utilisé. </p><p>Hibernate va automatiquement placer la <code class="literal">SessionFactory</code> dans JNDI après avoir appelé <code class="literal">cfg.buildSessionFactory()</code>. Cela signifie que vous devez avoir cet appel dans un code de démarrage (ou dans une classe utilitaire) dans votre application sauf si vous utilisez le déploiement JMX avec le service <code class="literal">HibernateService</code> présenté plus tard dans ce document. </p><p>Si vous utilisez <code class="literal">SessionFactory</code> JNDI, un EJB ou n'importe quelle autre classe peut obtenir la <code class="literal">SessionFactory</code> en utilisant une recherche JNDI. </p><p>It is recommended that you bind the <code class="literal">SessionFactory</code> to JNDI in a managed environment and use a <code class="literal">static</code> singleton otherwise. To shield your application code from these details, we also recommend to hide the actual lookup code for a <code class="literal">SessionFactory</code> in a helper class, such as <code class="literal">HibernateUtil.getSessionFactory()</code>. Note that such a class is also a convenient way to startup Hibernate—see chapter 1.</p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-j2ee-currentsession"/>3.9.3. Gestion du contexte de la session courante à JTA</h3></div></div></div><p>The easiest way to handle <code class="literal">Sessions</code> and transactions is Hibernate's automatic "current" <code class="literal">Session</code> management. For a discussion of contextual sessions see <a class="xref" href="architecture.html#architecture-current-session" title="2.3. Sessions contextuelles">Section 2.3, « Sessions contextuelles  »</a>. Using the <code class="literal">"jta"</code> session context, if there is no Hibernate <code class="literal">Session</code> associated with the current JTA transaction, one will be started and associated with that JTA transaction the first time you call <code class="literal">sessionFactory.getCurrentSession()</code>. The <code class="literal">Session</code>s retrieved via <code class="literal">getCurrentSession()</code> in the <code class="literal">"jta"</code> context are set to automatically flush before the transaction completes, close after the transaction completes, and aggressively release JDBC connections after each statement. This allows the <code class="literal">Session</code>s to be managed by the life cycle of the JTA transaction to which it is associated, keeping user code clean of such management concerns. Your code can either use JTA programmatically through <code class="literal">UserTransaction</code>, or (recommended for portable code) use the Hibernate <code class="literal">Transaction</code> API to set transaction boundaries. If you run in an EJB container, declarative transaction demarcation with CMT is preferred.</p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-j2ee-jmx"/>3.9.4. Déploiement JMX</h3></div></div></div><p>La ligne <code class="literal">cfg.buildSessionFactory()</code> doit toujours être exécutée quelque part pour obtenir une <code class="literal">SessionFactory</code> dans JNDI. Vous pouvez faire cela dans un bloc d'initialisation <code class="literal">static</code> (comme celui qui se trouve dans la classe <code class="literal">HibernateUtil</code>) ou vous pouvez déployer Hibernate en temps que <span class="emphasis"><em>service géré</em></span>. </p><p>Hibernate est distribué avec <code class="literal">org.hibernate.jmx.HibernateService</code> pour le déploiement sur un serveur d'applications avec le support de JMX comme JBoss AS. Le déploiement et la configuration sont spécifiques à chaque vendeur. Voici un fichier <code class="literal">jboss-service.xml</code> d'exemple pour JBoss 4.0.x :</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_processing_instruction">&lt;?xml&nbsp;version=&quot;1.0&quot;?&gt;</span><span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">server</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mbean</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">code</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;org.hibernate.jmx.HibernateService&quot;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;jboss.jca:service=HibernateFactory,name=HibernateFactory&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Required&nbsp;services&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">depends</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss.jca:service=RARDeployer</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">depends</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">depends</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">jboss.jca:service=LocalTxCM,name=HsqlDS</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">depends</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Bind&nbsp;the&nbsp;Hibernate&nbsp;service&nbsp;to&nbsp;JNDI&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;JndiName&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:/hibernate/SessionFactory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Datasource&nbsp;settings&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Datasource&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">java:HsqlDS</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;Dialect&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate.dialect.HSQLDialect</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Transaction&nbsp;integration&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;TransactionStrategy&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.hibernate.transaction.JTATransactionFactory</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;TransactionManagerLookupStrategy&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.hibernate.transaction.JBossTransactionManagerLookup</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;FlushBeforeCompletionEnabled&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;AutoCloseSessionEnabled&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Fetching&nbsp;options&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;MaximumFetchDepth&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">5</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Second-level&nbsp;caching&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;SecondLevelCacheEnabled&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;CacheProviderClass&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate.cache.EhCacheProvider</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;QueryCacheEnabled&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Logging&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;ShowSqlEnabled&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">true</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_comment">&lt;!--&nbsp;Mapping&nbsp;files&nbsp;--&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">&quot;MapResources&quot;</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">auction/Item.hbm.xml,auction/Category.hbm.xml</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">mbean</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
<span class="xml_plain"></span><br />
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">server</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br />
</pre><p>Ce fichier est déployé dans un répertoire <code class="literal">META-INF</code> et est empaqueté dans un fichier JAR avec l'extension <code class="literal">.sar</code> (service archive). Vous devez également empaqueter Hibernate, les librairies tierces requises, vos classes persistantes compilées et vos fichiers de mappage dans la même archive. Vos beans entreprise (souvent des EJB session) peuvent rester dans leur propre fichier JAR mais vous pouvez inclure ce fichier JAR dans le jar principal du service pour avoir une seule unité déployable à chaud. Vous pouvez consulter la documentation de JBoss AS pour plus d'informations sur les services JMX et le déploiement des EJB. </p></div></div></div><HR xmlns=""/><a xmlns="" href="legalnotice.html"><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright © 2004 Red Hat, Inc.</p></a><ul class="docnav"><li class="previous"><a accesskey="p" href="architecture.html"><strong>Précédent</strong>Chapitre 2. Architecture</a></li><li class="up"><a accesskey="u" href="#"><strong>Niveau supérieur</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Sommaire</strong></a></li><li class="next"><a accesskey="n" href="persistent-classes.html"><strong>Suivant</strong>Chapitre 4. Classes persistantes</a></li></ul></body></html>