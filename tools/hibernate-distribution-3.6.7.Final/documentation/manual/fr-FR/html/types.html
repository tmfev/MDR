<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">Chapitre 6. Types</title><link rel="stylesheet" href="css/hibernate.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="HIBERNATE - Relational Persistence for Idiomatic Java"/><link rel="up" href="index.html" title="HIBERNATE - Relational Persistence for Idiomatic Java"/><link rel="prev" href="mapping.html" title="Chapitre 5. Mappage O/R de base"/><link rel="next" href="collections.html" title="Chapitre 7. Mapper une collection"/><link rel="copyright" href="Legal_Notice.html" title="Legal Notice"/></head><body><p id="title"><a href="http://www.hibernate.org" class="site_href"><strong>Hibernate.org</strong></a><a href="http://hibernate.org/Documentation/DocumentationOverview" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="mapping.html"><strong>Précédent</strong></a></li><li class="next"><a accesskey="n" href="collections.html"><strong>Suivant</strong></a></li></ul><div class="chapter" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="types"/>Chapitre 6. Types</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="types.html#types-value">6.1. Value types</a></span></dt><dd><dl><dt><span class="section"><a href="types.html#types-value-basic">6.1.1. Basic value types</a></span></dt><dt><span class="section"><a href="types.html#types-value-composite">6.1.2. Composite types</a></span></dt><dt><span class="section"><a href="types.html#types-value-collection">6.1.3. Collection types</a></span></dt></dl></dd><dt><span class="section"><a href="types.html#types-entity">6.2. Entity types</a></span></dt><dt><span class="section"><a href="types.html#types-category-significance">6.3. Significance of type categories</a></span></dt><dt><span class="section"><a href="types.html#types-custom">6.4. Custom types</a></span></dt><dd><dl><dt><span class="section"><a href="types.html#types-custom-type">6.4.1. Custom types using org.hibernate.type.Type</a></span></dt><dt><span class="section"><a href="types.html#types-custom-ut">6.4.2. Custom types using org.hibernate.usertype.UserType</a></span></dt><dt><span class="section"><a href="types.html#types-custom-cut">6.4.3. Custom types using org.hibernate.usertype.CompositeUserType</a></span></dt></dl></dd><dt><span class="section"><a href="types.html#types-registry">6.5. Type registry</a></span></dt></dl></div><p>As an Object/Relational Mapping solution, Hibernate deals with both the Java and JDBC representations of application data. An online catalog application, for example, most likely has <code class="classname">Product</code> object with a number of attributes such as a <code class="literal">sku</code>, <code class="literal">name</code>, etc. For these individual attributes, Hibernate must be able to read the values out of the database and write them back. This 'marshalling' is the function of a <span class="emphasis"><em>Hibernate type</em></span>, which is an implementation of the <code class="interfacename">org.hibernate.type.Type</code> interface. In addition, a <span class="emphasis"><em>Hibernate type</em></span> describes various aspects of behavior of the Java type such as "how is equality checked?" or "how are values cloned?". </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>A Hibernate type is neither a Java type nor a SQL datatype; it provides a information about both. </p><p>When you encounter the term <span class="emphasis"><em>type</em></span> in regards to Hibernate be aware that usage might refer to the Java type, the SQL/JDBC type or the Hibernate type. </p></div><p>Hibernate categorizes types into two high-level groups: value types (see <a class="xref" href="types.html#types-value" title="6.1. Value types">Section 6.1, « Value types »</a>) and entity types (see <a class="xref" href="types.html#types-entity" title="6.2. Entity types">Section 6.2, « Entity types »</a>). </p><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="types-value"/>6.1. Value types</h2></div></div></div><p>The main distinguishing characteristic of a value type is the fact that they do not define their own lifecycle. We say that they are "owned" by something else (specifically an entity, as we will see later) which defines their lifecycle. Value types are further classified into 3 sub-categories: basic types (see <a class="xref" href="types.html#types-value-basic" title="6.1.1. Basic value types">Section 6.1.1, « Basic value types »</a>), composite types (see <a class="xref" href="types.html#types-value-composite" title="6.1.2. Composite types">Section 6.1.2, « Composite types »</a>) amd collection types (see <a class="xref" href="types.html#types-value-collection" title="6.1.3. Collection types">Section 6.1.3, « Collection types »</a>). </p><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="types-value-basic"/>6.1.1. Basic value types</h3></div></div></div><p>The norm for basic value types is that they map a single database value (column) to a single, non-aggregated Java type. Hibernate provides a number of built-in basic types, which we will present in the following sections by the Java type. Mainly these follow the natural mappings recommended in the JDBC specification. We will later cover how to override these mapping and how to provide and use alternative type mappings. </p><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-value-basic-string"/>6.1.1.1. java.lang.String</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.StringType</code></span></dt><dd><p>Maps a string to the JDBC VARCHAR type. This is the standard mapping for a string if no Hibernate type is specified. </p><p>Registered under <code class="literal">string</code> and <code class="literal">java.lang.String</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd><dt><span class="term"><code class="classname">org.hibernate.type.MaterializedClob</code></span></dt><dd><p>Maps a string to a JDBC CLOB type </p><p>Registered under <code class="literal">materialized_clob</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd><dt><span class="term"><code class="classname">org.hibernate.type.TextType</code></span></dt><dd><p>Maps a string to a JDBC LONGVARCHAR type </p><p>Registered under <code class="literal">text</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-character"/>6.1.1.2. <code class="classname">java.lang.Character</code> (or char primitive)</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.CharacterType</code></span></dt><dd><p>Maps a char or <code class="classname">java.lang.Character</code> to a JDBC CHAR </p><p>Registered under <code class="literal">char</code> and <code class="literal">java.lang.Character</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-value-basic-boolean"/>6.1.1.3. <code class="classname">java.lang.Boolean</code> (or boolean primitive)</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.BooleanType</code></span></dt><dd><p>Maps a boolean to a JDBC BIT type </p><p>Registered under <code class="literal">boolean</code> and <code class="literal">java.lang.Boolean</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd><dt><span class="term"><code class="classname">org.hibernate.type.NumericBooleanType</code></span></dt><dd><p>Maps a boolean to a JDBC INTEGER type as 0 = false, 1 = true </p><p>Registered under <code class="literal">numeric_boolean</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd><dt><span class="term"><code class="classname">org.hibernate.type.YesNoType</code></span></dt><dd><p>Maps a boolean to a JDBC CHAR type as ('N' | 'n') = false, ( 'Y' | 'y' ) = true </p><p>Registered under <code class="literal">yes_no</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd><dt><span class="term"><code class="classname">org.hibernate.type.TrueFalseType</code></span></dt><dd><p>Maps a boolean to a JDBC CHAR type as ('F' | 'f') = false, ( 'T' | 't' ) = true </p><p>Registered under <code class="literal">true_false</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-byte"/>6.1.1.4. <code class="classname">java.lang.Byte</code> (or byte primitive)</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.ByteType</code></span></dt><dd><p>Maps a byte or <code class="classname">java.lang.Byte</code> to a JDBC TINYINT </p><p>Registered under <code class="literal">byte</code> and <code class="literal">java.lang.Byte</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-short"/>6.1.1.5. <code class="classname">java.lang.Short</code> (or short primitive)</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.ShortType</code></span></dt><dd><p>Maps a short or <code class="classname">java.lang.Short</code> to a JDBC SMALLINT </p><p>Registered under <code class="literal">short</code> and <code class="literal">java.lang.Short</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-int"/>6.1.1.6. <code class="classname">java.lang.Integer</code> (or int primitive)</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.IntegerTypes</code></span></dt><dd><p>Maps an int or <code class="classname">java.lang.Integer</code> to a JDBC INTEGER </p><p>Registered under <code class="literal">int</code> and <code class="literal">java.lang.Integer</code>in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-long"/>6.1.1.7. <code class="classname">java.lang.Long</code> (or long primitive)</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.LongType</code></span></dt><dd><p>Maps a long or <code class="classname">java.lang.Long</code> to a JDBC BIGINT </p><p>Registered under <code class="literal">long</code> and <code class="literal">java.lang.Long</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-float"/>6.1.1.8. <code class="classname">java.lang.Float</code> (or float primitive)</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.FloatType</code></span></dt><dd><p>Maps a float or <code class="classname">java.lang.Float</code> to a JDBC FLOAT </p><p>Registered under <code class="literal">float</code> and <code class="literal">java.lang.Float</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-double"/>6.1.1.9. <code class="classname">java.lang.Double</code> (or double primitive)</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.DoubleType</code></span></dt><dd><p>Maps a double or <code class="classname">java.lang.Double</code> to a JDBC DOUBLE </p><p>Registered under <code class="literal">double</code> and <code class="literal">java.lang.Double</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-biginteger"/>6.1.1.10. <code class="classname">java.math.BigInteger</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.BigIntegerType</code></span></dt><dd><p>Maps a <code class="classname">java.math.BigInteger</code> to a JDBC NUMERIC </p><p>Registered under <code class="literal">big_integer</code> and <code class="literal">java.math.BigInteger</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-bigdecimal"/>6.1.1.11. <code class="classname">java.math.BigDecimal</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.BigDecimalType</code></span></dt><dd><p>Maps a <code class="classname">java.math.BigDecimal</code> to a JDBC NUMERIC </p><p>Registered under <code class="literal">big_decimal</code> and <code class="literal">java.math.BigDecimal</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-timestamp"/>6.1.1.12. <code class="classname">java.util.Date</code> or <code class="classname">java.sql.Timestamp</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.TimestampType</code></span></dt><dd><p>Maps a <code class="classname">java.sql.Timestamp</code> to a JDBC TIMESTAMP </p><p>Registered under <code class="literal">timestamp</code>, <code class="literal">java.sql.Timestamp</code> and <code class="literal">java.util.Date</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-time"/>6.1.1.13. <code class="classname">java.sql.Time</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.TimeType</code></span></dt><dd><p>Maps a <code class="classname">java.sql.Time</code> to a JDBC TIME </p><p>Registered under <code class="literal">time</code> and <code class="literal">java.sql.Time</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-date"/>6.1.1.14. <code class="classname">java.sql.Date</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.DateType</code></span></dt><dd><p>Maps a <code class="classname">java.sql.Date</code> to a JDBC DATE </p><p>Registered under <code class="literal">date</code> and <code class="literal">java.sql.Date</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-calendar"/>6.1.1.15. <code class="classname">java.util.Calendar</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.CalendarType</code></span></dt><dd><p>Maps a <code class="classname">java.util.Calendar</code> to a JDBC TIMESTAMP </p><p>Registered under <code class="literal">calendar</code>, <code class="literal">java.util.Calendar</code> and <code class="literal">java.util.GregorianCalendar</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd><dt><span class="term"><code class="classname">org.hibernate.type.CalendarDateType</code></span></dt><dd><p>Maps a <code class="classname">java.util.Calendar</code> to a JDBC DATE </p><p>Registered under <code class="literal">calendar_date</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-currency"/>6.1.1.16. <code class="classname">java.util.Currency</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.CurrencyType</code></span></dt><dd><p>Maps a <code class="classname">java.util.Currency</code> to a JDBC VARCHAR (using the Currency code) </p><p>Registered under <code class="literal">currency</code> and <code class="literal">java.util.Currency</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-locale"/>6.1.1.17. <code class="classname">java.util.Locale</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.LocaleType</code></span></dt><dd><p>Maps a <code class="classname">java.util.Locale</code> to a JDBC VARCHAR (using the Locale code) </p><p>Registered under <code class="literal">locale</code> and <code class="literal">java.util.Locale</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-timezone"/>6.1.1.18. <code class="classname">java.util.TimeZone</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.TimeZoneType</code></span></dt><dd><p>Maps a <code class="classname">java.util.TimeZone</code> to a JDBC VARCHAR (using the TimeZone ID) </p><p>Registered under <code class="literal">timezone</code> and <code class="literal">java.util.TimeZone</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-url"/>6.1.1.19. <code class="classname">java.net.URL</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.UrlType</code></span></dt><dd><p>Maps a <code class="classname">java.net.URL</code> to a JDBC VARCHAR (using the external form) </p><p>Registered under <code class="literal">url</code> and <code class="literal">java.net.URL</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-class"/>6.1.1.20. <code class="classname">java.lang.Class</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.ClassType</code></span></dt><dd><p>Maps a <code class="classname">java.lang.Class</code> to a JDBC VARCHAR (using the Class name) </p><p>Registered under <code class="literal">class</code> and <code class="literal">java.lang.Class</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-blob"/>6.1.1.21. <code class="classname">java.sql.Blob</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.BlobType</code></span></dt><dd><p>Maps a <code class="classname">java.sql.Blob</code> to a JDBC BLOB </p><p>Registered under <code class="literal">blob</code> and <code class="literal">java.sql.Blob</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-clob"/>6.1.1.22. <code class="classname">java.sql.Clob</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.ClobType</code></span></dt><dd><p>Maps a <code class="classname">java.sql.Clob</code> to a JDBC CLOB </p><p>Registered under <code class="literal">clob</code> and <code class="literal">java.sql.Clob</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-binary"/>6.1.1.23. byte[]</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.BinaryType</code></span></dt><dd><p>Maps a primitive byte[] to a JDBC VARBINARY </p><p>Registered under <code class="literal">binary</code> and <code class="literal">byte[]</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd><dt><span class="term"><code class="classname">org.hibernate.type.MaterializedBlobType</code></span></dt><dd><p>Maps a primitive byte[] to a JDBC BLOB </p><p>Registered under <code class="literal">materialized_blob</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd><dt><span class="term"><code class="classname">org.hibernate.type.ImageType</code></span></dt><dd><p>Maps a primitive byte[] to a JDBC LONGVARBINARY </p><p>Registered under <code class="literal">image</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-wrapperbinary"/>6.1.1.24. Byte[]</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.BinaryType</code></span></dt><dd><p>Maps a java.lang.Byte[] to a JDBC VARBINARY </p><p>Registered under <code class="literal">wrapper-binary</code>, <code class="literal">Byte[]</code> and <code class="literal">java.lang.Byte[]</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-chararray"/>6.1.1.25. char[]</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.CharArrayType</code></span></dt><dd><p>Maps a char[] to a JDBC VARCHAR </p><p>Registered under <code class="literal">characters</code> and <code class="literal">char[]</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-characterarray"/>6.1.1.26. Character[]</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.CharacterArrayType</code></span></dt><dd><p>Maps a java.lang.Character[] to a JDBC VARCHAR </p><p>Registered under <code class="literal">wrapper-characters</code>, <code class="literal">Character[]</code> and <code class="literal">java.lang.Character[]</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-uuid"/>6.1.1.27. <code class="classname">java.util.UUID</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.UUIDBinaryType</code></span></dt><dd><p>Maps a java.util.UUID to a JDBC BINARY </p><p>Registered under <code class="literal">uuid-binary</code> and <code class="literal">java.util.UUID</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd><dt><span class="term"><code class="classname">org.hibernate.type.UUIDCharType</code></span></dt><dd><p>Maps a java.util.UUID to a JDBC CHAR (though VARCHAR is fine too for existing schemas) </p><p>Registered under <code class="literal">uuid-char</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd><dt><span class="term"><code class="classname">org.hibernate.type.PostgresUUIDType</code></span></dt><dd><p>Maps a java.util.UUID to the PostgreSQL UUID data type (through <code class="literal">Types#OTHER</code> which is how the PostgreSQL JDBC driver defines it). </p><p>Registered under <code class="literal">pg-uuid</code> in the type registry (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). </p></dd></dl></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h4 class="title"><a id="types-basic-value-serializable"/>6.1.1.28. <code class="interfacename">java.io.Serializable</code></h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="classname">org.hibernate.type.SerializableType</code></span></dt><dd><p>Maps implementors of java.lang.Serializable to a JDBC VARBINARY </p><p>Unlike the other value types, there are multiple instances of this type. It gets registered once under <code class="interfacename">java.io.Serializable</code>. Additionally it gets registered under the specific <code class="interfacename">java.io.Serializable</code> implementation class names. </p></dd></dl></div></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="types-value-composite"/>6.1.2. Composite types</h3></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>The Java Persistence API calls these embedded types, while Hibernate traditionally called them components. Just be aware that both terms are used and mean the same thing in the scope of discussing Hibernate. </p></div><p>Components represent aggregations of values into a single Java type. For example, you might have an Address class that aggregates street, city, state, etc information or a Name class that aggregates the parts of a person's Name. In many ways a component looks exactly like an entity. They are both (generally speaking) classes written specifically for the application. They both might have references to other application-specific classes, as well as to collections and simple JDK types. As discussed before, the only distinguishing factory is the fact that a component does not own its own lifecycle nor does it define an identifier. </p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="types-value-collection"/>6.1.3. Collection types</h3></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>It is critical understand that we mean the collection itself, not its contents. The contents of the collection can in turn be basic, component or entity types (though not collections), but the collection itself is owned. </p></div><p>Collections are covered in <a class="xref" href="collections.html" title="Chapitre 7. Mapper une collection">Chapitre 7, <i>Mapper une collection </i></a>. </p></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="types-entity"/>6.2. Entity types</h2></div></div></div><p>The definition of entities is covered in detail in <a class="xref" href="persistent-classes.html" title="Chapitre 4. Classes persistantes">Chapitre 4, <i>Classes persistantes</i></a>. For the purpose of this discussion, it is enough to say that entities are (generally application-specific) classes which correlate to rows in a table. Specifically they correlate to the row by means of a unique identifier. Because of this unique identifier, entities exist independently and define their own lifecycle. As an example, when we delete a <code class="classname">Membership</code>, both the <code class="classname">User</code> and <code class="classname">Group</code> entities remain. </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>This notion of entity independence can be modified by the application developer using the concept of cascades. Cascades allow certain operations to continue (or "cascade") across an association from one entity to another. Cascades are covered in detail in <a class="xref" href="associations.html" title="Chapitre 8. Mapper les associations">Chapitre 8, <i>Mapper les associations</i></a>. </p></div><p>
        </p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="types-category-significance"/>6.3. Significance of type categories</h2></div></div></div><p>Why do we spend so much time categorizing the various types of types? What is the significance of the distinction? </p><p>The main categorization was between entity types and value types. To review we said that entities, by nature of their unique identifier, exist independently of other objects whereas values do not. An application cannot "delete" a Product sku; instead, the sku is removed when the Product itself is deleted (obviously you can <span class="emphasis"><em>update</em></span> the sku of that Product to null to make it "go away", but even there the access is done through the Product). </p><p>Nor can you define an association <span class="emphasis"><em>to</em></span> that Product sku. You <span class="emphasis"><em>can</em></span> define an association to Product <span class="emphasis"><em>based on</em></span> its sku, assuming sku is unique, but that is totally different. </p><p>TBC... </p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="types-custom"/>6.4. Custom types</h2></div></div></div><p>Hibernate makes it relatively easy for developers to create their own <span class="emphasis"><em>value</em></span> types. For example, you might want to persist properties of type <code class="classname">java.lang.BigInteger</code> to <code class="literal">VARCHAR</code> columns. Custom types are not limited to mapping values to a single table column. So, for example, you might want to concatenate together <code class="literal">FIRST_NAME</code>, <code class="literal">INITIAL</code> and <code class="literal">SURNAME</code> columns into a <code class="classname">java.lang.String</code>. </p><p>There are 3 approaches to developing a custom Hibernate type. As a means of illustrating the different approaches, lets consider a use case where we need to compose a <code class="classname">java.math.BigDecimal</code> and <code class="classname">java.util.Currency</code> together into a custom <code class="classname">Money</code> class. </p><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="types-custom-type"/>6.4.1. Custom types using <code class="interfacename">org.hibernate.type.Type</code></h3></div></div></div><p>The first approach is to directly implement the <code class="interfacename">org.hibernate.type.Type</code> interface (or one of its derivatives). Probably, you will be more interested in the more specific <code class="interfacename">org.hibernate.type.BasicType</code> contract which would allow registration of the type (see <a class="xref" href="types.html#types-registry" title="6.5. Type registry">Section 6.5, « Type registry »</a>). The benefit of this registration is that whenever the metadata for a particular property does not specify the Hibernate type to use, Hibernate will consult the registry for the exposed property type. In our example, the property type would be <code class="classname">Money</code>, which is the key we would use to register our type in the registry: </p><div class="example"><a id="types-custom-type-ex-definition"/><p class="title"><b>Exemple 6.1. Defining and registering the custom Type</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">MoneyType</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">implements</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">BasicType</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;getRegistrationKeys</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">.</span><span class="java_plain">getName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">};</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;sqlTypes</span><span class="java_separator">(</span><span class="java_type">Mapping</span><span class="java_plain">&nbsp;mapping</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">We</span><span class="java_plain">&nbsp;will&nbsp;simply&nbsp;use&nbsp;delegation&nbsp;to&nbsp;the&nbsp;standard&nbsp;basic&nbsp;types&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;and&nbsp;</span><span class="java_type">Currency</span><span class="java_plain">&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;many&nbsp;of&nbsp;the</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Type</span><span class="java_plain">&nbsp;methods</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">sqlType</span><span class="java_separator">(),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">sqlType</span><span class="java_separator">(),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">};</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;we&nbsp;could&nbsp;also&nbsp;have&nbsp;honored&nbsp;any&nbsp;registry&nbsp;overrides&nbsp;via</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mappings</span><span class="java_separator">.</span><span class="java_plain">getTypeResolver</span><span class="java_separator">().</span><span class="java_plain">basic</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">.</span><span class="java_plain">getName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">).</span><span class="java_plain">sqlTypes</span><span class="java_separator">(</span><span class="java_plain">&nbsp;mappings&nbsp;</span><span class="java_separator">)[</span><span class="java_literal">0</span><span class="java_separator">],</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mappings</span><span class="java_separator">.</span><span class="java_plain">getTypeResolver</span><span class="java_separator">().</span><span class="java_plain">basic</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_type">Currency</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">.</span><span class="java_plain">getName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">).</span><span class="java_plain">sqlTypes</span><span class="java_separator">(</span><span class="java_plain">&nbsp;mappings&nbsp;</span><span class="java_separator">)[</span><span class="java_literal">0</span><span class="java_separator">]</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_separator">};</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Class</span><span class="java_plain">&nbsp;getReturnedClass</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;nullSafeGet</span><span class="java_separator">(</span><span class="java_type">ResultSet</span><span class="java_plain">&nbsp;rs</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;names</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">SessionImplementor</span><span class="java_plain">&nbsp;session</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;owner</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">SQLException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;names</span><span class="java_separator">.</span><span class="java_plain">length&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">2</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;amount&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_plain">&nbsp;names</span><span class="java_separator">[</span><span class="java_literal">0</span><span class="java_separator">]</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;already&nbsp;handles&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;check</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Currency</span><span class="java_plain">&nbsp;currency&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_plain">&nbsp;names</span><span class="java_separator">[</span><span class="java_literal">1</span><span class="java_separator">]</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;already&nbsp;handles&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;check</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;amount&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;</span><span class="java_operator">&amp;&amp;</span><span class="java_plain">&nbsp;currency&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">?</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">:</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_separator">(</span><span class="java_plain">&nbsp;amount</span><span class="java_separator">,</span><span class="java_plain">&nbsp;currency&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;nullSafeSet</span><span class="java_separator">(</span><span class="java_type">PreparedStatement</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;value</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;index</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;settable</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">SessionImplementor</span><span class="java_plain">&nbsp;session</span><span class="java_separator">)</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">SQLException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">,</span><span class="java_plain">&nbsp;index&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">,</span><span class="java_plain">&nbsp;index</span><span class="java_operator">+</span><span class="java_literal">1</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_plain">&nbsp;money&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Money</span><span class="java_separator">)</span><span class="java_plain">&nbsp;value</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;money</span><span class="java_separator">.</span><span class="java_plain">getAmount</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;index&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;money</span><span class="java_separator">.</span><span class="java_plain">getCurrency</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;index</span><span class="java_operator">+</span><span class="java_literal">1</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_type">Configuration</span><span class="java_plain">&nbsp;cfg&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Configuration</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">cfg</span><span class="java_separator">.</span><span class="java_plain">registerTypeOverride</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">MoneyType</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">cfg</span><span class="java_separator">...;</span>
</pre></div></div><br class="example-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>It is important that we registered the type <span class="emphasis"><em>before</em></span> adding mappings. </p></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="types-custom-ut"/>6.4.2. Custom types using <code class="interfacename">org.hibernate.usertype.UserType</code></h3></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Both <code class="interfacename">org.hibernate.usertype.UserType</code> and <code class="interfacename">org.hibernate.usertype.CompositeUserType</code> were originally added to isolate user code from internal changes to the <code class="interfacename">org.hibernate.type.Type</code> interfaces. </p></div><p>The second approach is the use the <code class="interfacename">org.hibernate.usertype.UserType</code> interface, which presents a somewhat simplified view of the <code class="interfacename">org.hibernate.type.Type</code> interface. Using a <code class="interfacename">org.hibernate.usertype.UserType</code>, our <code class="classname">Money</code> custom type would look as follows: </p><div class="example"><a id="types-custom-ut-ex-definition"/><p class="title"><b>Exemple 6.2. Defining the custom UserType</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">MoneyType</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">implements</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">UserType</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;sqlTypes</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">sqlType</span><span class="java_separator">(),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">sqlType</span><span class="java_separator">(),</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">};</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Class</span><span class="java_plain">&nbsp;getReturnedClass</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;nullSafeGet</span><span class="java_separator">(</span><span class="java_type">ResultSet</span><span class="java_plain">&nbsp;rs</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;names</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;owner</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">SQLException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;names</span><span class="java_separator">.</span><span class="java_plain">length&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">2</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;amount&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_plain">&nbsp;names</span><span class="java_separator">[</span><span class="java_literal">0</span><span class="java_separator">]</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;already&nbsp;handles&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;check</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Currency</span><span class="java_plain">&nbsp;currency&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_plain">&nbsp;names</span><span class="java_separator">[</span><span class="java_literal">1</span><span class="java_separator">]</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;already&nbsp;handles&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;check</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;amount&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;</span><span class="java_operator">&amp;&amp;</span><span class="java_plain">&nbsp;currency&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">?</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">:</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_separator">(</span><span class="java_plain">&nbsp;amount</span><span class="java_separator">,</span><span class="java_plain">&nbsp;currency&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;nullSafeSet</span><span class="java_separator">(</span><span class="java_type">PreparedStatement</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;value</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;index</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">SQLException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">,</span><span class="java_plain">&nbsp;index&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">,</span><span class="java_plain">&nbsp;index</span><span class="java_operator">+</span><span class="java_literal">1</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_plain">&nbsp;money&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Money</span><span class="java_separator">)</span><span class="java_plain">&nbsp;value</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;money</span><span class="java_separator">.</span><span class="java_plain">getAmount</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;index&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;money</span><span class="java_separator">.</span><span class="java_plain">getCurrency</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;index</span><span class="java_operator">+</span><span class="java_literal">1</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/><p>There is not much difference between the <code class="interfacename">org.hibernate.type.Type</code> example and the <code class="interfacename">org.hibernate.usertype.UserType</code> example, but that is only because of the snippets shown. If you choose the <code class="interfacename">org.hibernate.type.Type</code> approach there are quite a few more methods you would need to implement as compared to the <code class="interfacename">org.hibernate.usertype.UserType</code>. </p></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h3 class="title"><a id="types-custom-cut"/>6.4.3. Custom types using <code class="interfacename">org.hibernate.usertype.CompositeUserType</code></h3></div></div></div><p>The third and final approach is the use the <code class="interfacename">org.hibernate.usertype.CompositeUserType</code> interface, which differs from <code class="interfacename">org.hibernate.usertype.UserType</code> in that it gives us the ability to provide Hibernate the information to handle the composition within the <code class="classname">Money</code> class (specifically the 2 attributes). This would give us the capability, for example, to reference the <code class="literal">amount</code> attribute in an HQL query. Using a <code class="interfacename">org.hibernate.usertype.CompositeUserType</code>, our <code class="classname">Money</code> custom type would look as follows: </p><div class="example"><a id="types-custom-cut-ex-definition"/><p class="title"><b>Exemple 6.3. Defining the custom CompositeUserType</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">MoneyType</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">implements</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">CompositeUserType</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;getPropertyNames</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;ORDER&nbsp;IS&nbsp;IMPORTANT</span><span class="java_operator">!</span><span class="java_plain">&nbsp;&nbsp;it&nbsp;must&nbsp;match&nbsp;the&nbsp;order&nbsp;the&nbsp;columns&nbsp;are&nbsp;defined&nbsp;in&nbsp;the&nbsp;property&nbsp;mapping</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;amount&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;currency&quot;</span><span class="java_plain">&nbsp;</span><span class="java_separator">};</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Type</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;getPropertyTypes</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Type</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE&nbsp;</span><span class="java_separator">};</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Class</span><span class="java_plain">&nbsp;getReturnedClass</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;getPropertyValue</span><span class="java_separator">(</span><span class="java_type">Object</span><span class="java_plain">&nbsp;component</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;propertyIndex</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;component&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_plain">&nbsp;money&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Money</span><span class="java_separator">)</span><span class="java_plain">&nbsp;component</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">switch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;propertyIndex&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">case</span><span class="java_plain">&nbsp;</span><span class="java_literal">0</span><span class="java_operator">:</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;money</span><span class="java_separator">.</span><span class="java_plain">getAmount</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">case</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_operator">:</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;money</span><span class="java_separator">.</span><span class="java_plain">getCurrency</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">default</span><span class="java_operator">:</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">HibernateException</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Invalid&nbsp;property&nbsp;index&nbsp;[&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;propertyIndex&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;]&quot;</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setPropertyValue</span><span class="java_separator">(</span><span class="java_type">Object</span><span class="java_plain">&nbsp;component</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;propertyIndex</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;value</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">HibernateException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;component&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_plain">&nbsp;money&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Money</span><span class="java_separator">)</span><span class="java_plain">&nbsp;component</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">switch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;propertyIndex&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">case</span><span class="java_plain">&nbsp;</span><span class="java_literal">0</span><span class="java_operator">:</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;money</span><span class="java_separator">.</span><span class="java_plain">setAmount</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">BigDecimal</span><span class="java_separator">)</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">break</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">case</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_operator">:</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;money</span><span class="java_separator">.</span><span class="java_plain">setCurrency</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Currency</span><span class="java_separator">)</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">break</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">default</span><span class="java_operator">:</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">HibernateException</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;Invalid&nbsp;property&nbsp;index&nbsp;[&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;propertyIndex&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;]&quot;</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;nullSafeGet</span><span class="java_separator">(</span><span class="java_type">ResultSet</span><span class="java_plain">&nbsp;rs</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;names</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">SessionImplementor</span><span class="java_plain">&nbsp;session</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;owner</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">SQLException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">assert</span><span class="java_plain">&nbsp;names</span><span class="java_separator">.</span><span class="java_plain">length&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">2</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;amount&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_plain">&nbsp;names</span><span class="java_separator">[</span><span class="java_literal">0</span><span class="java_separator">]</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;already&nbsp;handles&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;check</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Currency</span><span class="java_plain">&nbsp;currency&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_plain">&nbsp;names</span><span class="java_separator">[</span><span class="java_literal">1</span><span class="java_separator">]</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;already&nbsp;handles&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;check</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;amount&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;</span><span class="java_operator">&amp;&amp;</span><span class="java_plain">&nbsp;currency&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">?</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">:</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_separator">(</span><span class="java_plain">&nbsp;amount</span><span class="java_separator">,</span><span class="java_plain">&nbsp;currency&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;nullSafeSet</span><span class="java_separator">(</span><span class="java_type">PreparedStatement</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;value</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;index</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">SessionImplementor</span><span class="java_plain">&nbsp;session</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">SQLException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">,</span><span class="java_plain">&nbsp;index&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">null</span><span class="java_separator">,</span><span class="java_plain">&nbsp;index</span><span class="java_operator">+</span><span class="java_literal">1</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">else</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">Money</span><span class="java_plain">&nbsp;money&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Money</span><span class="java_separator">)</span><span class="java_plain">&nbsp;value</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BigDecimalType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;money</span><span class="java_separator">.</span><span class="java_plain">getAmount</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;index&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">CurrencyType</span><span class="java_separator">.</span><span class="java_plain">INSTANCE</span><span class="java_separator">.</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;st</span><span class="java_separator">,</span><span class="java_plain">&nbsp;money</span><span class="java_separator">.</span><span class="java_plain">getCurrency</span><span class="java_separator">(),</span><span class="java_plain">&nbsp;index</span><span class="java_operator">+</span><span class="java_literal">1</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/></div></div><div class="section" lang="fr-FR"><div class="titlepage"><div><div><h2 class="title"><a id="types-registry"/>6.5. Type registry</h2></div></div></div><p>Internally Hibernate uses a registry of basic types (see <a class="xref" href="types.html#types-value-basic" title="6.1.1. Basic value types">Section 6.1.1, « Basic value types »</a>) when it needs to resolve the specific <code class="interfacename">org.hibernate.type.Type</code> to use in certain situations. It also provides a way for applications to add extra basic type registrations as well as override the standard basic type registrations. </p><p>To register a new type or to override an existing type registration, applications would make use of the <code class="methodname">registerTypeOverride</code> method of the <code class="classname">org.hibernate.cfg.Configuration</code> class when bootstrapping Hibernate. For example, lets say you want Hibernate to use your custom <code class="classname">SuperDuperStringType</code>; during bootstrap you would call: </p><div class="example"><a id="type-registry-override-ex"/><p class="title"><b>Exemple 6.4. Overriding the standard <code class="classname">StringType</code></b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Configuration</span><!-- <br/> --><span class="java_plain">&nbsp;cfg&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">...;</span>
<!--  --><br/><span class="java_plain">cfg</span><span class="java_separator">.</span><span class="java_plain">registerTypeOverride</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">SuperDuperStringType</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span></pre></div></div><br class="example-break"/><p>The argument to <code class="methodname">registerTypeOverride</code> is a <code class="interfacename">org.hibernate.type.BasicType</code> which is a specialization of the <code class="interfacename">org.hibernate.type.Type</code> we saw before. It adds a single method: </p><div class="example"><a id="d0e10370"/><p class="title"><b>Exemple 6.5. Snippet from BasicType.java</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_javadoc_comment">/**</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Get&nbsp;the&nbsp;names&nbsp;under&nbsp;which&nbsp;this&nbsp;type&nbsp;should&nbsp;be&nbsp;registered&nbsp;in&nbsp;the&nbsp;type&nbsp;registry.</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;</span><span class="java_javadoc_tag">@return</span><span class="java_javadoc_comment">&nbsp;The&nbsp;keys&nbsp;under&nbsp;which&nbsp;to&nbsp;register&nbsp;this&nbsp;type.</span>
<!--  --><br/><span class="java_javadoc_comment">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;getRegistrationKeys</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre></div></div><br class="example-break"/><p>One approach is to use inheritance (<code class="classname">SuperDuperStringType</code> extends <code class="classname">org.hibernate.type.StringType</code>); another is to use delegation. </p></div></div><HR xmlns=""/><a xmlns="" href="legalnotice.html"><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright © 2004 Red Hat, Inc.</p></a><ul class="docnav"><li class="previous"><a accesskey="p" href="mapping.html"><strong>Précédent</strong>Chapitre 5. Mappage O/R de base</a></li><li class="up"><a accesskey="u" href="#"><strong>Niveau supérieur</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Sommaire</strong></a></li><li class="next"><a accesskey="n" href="collections.html"><strong>Suivant</strong>Chapitre 7. Mapper une collection </a></li></ul></body></html>